import{f as E,j as a,r as l,H as f,K as p}from"./index-CFt1f066.js";import{x as S,w as I,F as q,a as G,b as v,E as y}from"./formik.esm-DGj08CUs.js";import{F as o}from"./FormControl-CxxYqU6g.js";import{S as M,C as j}from"./CustomSelect-BVXkPcO2.js";import{a as $}from"./index.esm-DJsCAX2S.js";const N=Array.from({length:new Date().getFullYear()-1970+1},(t,m)=>{const c=new Date().getFullYear()-m;return{value:c,label:c.toString()}}),A=({name:t,label:m,value:c})=>{const n=E(i=>i.ui.theme),u={control:i=>({...i,background:n=="dark"?"#212631":"#fff",color:n=="dark"?"#fff":"#000",border:"1px solid #ced4da",borderRadius:"4px",padding:"2px"}),singleValue:i=>({...i,color:n=="dark"?"#fff":"#000"}),menu:i=>({...i,background:n=="dark"?"#1a1d21":"#fff"}),option:(i,{isSelected:x,isFocused:h})=>({...i,background:x?"#f9b115":h?"#c8b222":n==="dark"?"#1a1d21":"#fff",color:n=="dark"?"#fff":"#000",padding:"10px",cursor:"pointer"})},{setFieldValue:d}=S();return I(t),a.jsxs(a.Fragment,{children:[a.jsx("label",{htmlFor:t,children:m}),a.jsx(M,{id:t,name:t,options:N,value:N.find(i=>i.value==c),onChange:i=>d(t,i==null?void 0:i.value),className:"react-select-container",styles:u,classNamePrefix:"react-select"})]})},B=({initialValues:t,validationRules:m,handleSubmit:c,loading:n})=>{const[u,d]=l.useState({programs:[],institutes:[],disciplines:[]});async function i(){try{const[e,s,r]=await Promise.all([p.get("https://careers.usindh.edu.pk/backend/api/qualification/program"),p.get("https://careers.usindh.edu.pk/backend/api/qualification/institute"),p.get("https://careers.usindh.edu.pk/backend/api/qualification/discipline")]);d({programs:(e==null?void 0:e.data.options)||[],institutes:(s==null?void 0:s.data.options)||[],disciplines:(r==null?void 0:r.data.options)||[]})}catch{}}l.useEffect(()=>{i()},[]);const x=l.useMemo(()=>u.institutes.map(e=>e)),h=l.useMemo(()=>f(x,"INSTITUTE_ID","INSTITUTE_NAME")),_=l.useMemo(()=>u.programs.map(e=>e)).filter(e=>e.DEGREE_ID!=1&&e.DEGREE_ID!=10),b=l.useMemo(()=>f(_,"DEGREE_ID","DEGREE_TITLE")),k=l.useMemo(()=>f(u.disciplines,"DISCIPLINE_ID","DISCIPLINE_NAME")),D=async e=>{if(!e){d(s=>({...s,disciplines:[]}));return}try{const s=await p.get(`https://careers.usindh.edu.pk/backend/api/qualification/discipline/${e}`);d(r=>{var g;return{...r,disciplines:((g=s.data)==null?void 0:g.options)||[]}})}catch{}},C=async e=>{try{const s=await p.get(`https://careers.usindh.edu.pk/backend/api/qualification/institute?search=${e}`);d(r=>{var g;return{...r,institutes:((g=s==null?void 0:s.data)==null?void 0:g.options)||[]}})}catch{}};return a.jsx(q,{initialValues:t,validationSchema:m,onSubmit:c,children:({setFieldValue:e,values:s})=>a.jsxs(G,{children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"form-group my-2",children:a.jsx(j,{className:"form-control",label:"Qualification Level",name:"degree_program",options:b,onChange:r=>{e("degree_program",(r==null?void 0:r.key)||""),D(r.key||"")},required:!0})})}),a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:"form-group my-2",children:a.jsx(j,{className:"form-control",label:"Discipline",name:"discipline_id",options:k,onChange:r=>{e("discipline_id",(r==null?void 0:r.key)||"")},required:!0})})}),a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:"form-group my-2",children:a.jsx(j,{className:"form-control",label:"University/Board",name:"organization_id",options:h,onChange:r=>{e("organization_id",(r==null?void 0:r.key)||"")},onSearchChange:C,required:!0})})}),a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:"form-group my-2",children:a.jsx(o,{control:"input",type:"text",label:"Major Subject",name:"major"})})}),a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:"form-group my-2",children:a.jsx(o,{control:"input",type:"text",label:"Roll No./Seat No.",name:"roll_no",required:!0})})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-group my-2",children:[a.jsxs("label",{htmlFor:"is_result_decare",children:["Is Result Declared?",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs(v,{as:"select",id:"is_result_decare",name:"is_result_declare",className:"form-control",onChange:r=>{e("is_result_declare",r.target.value),r.target.value!=="Y"&&(e("obtained_marks",""),e("total_marks",""),e("passing_year",""),e("result_date",""),e("grading_as",""),e("result_date",""),e("grade",""),e("cgpa",""))},children:[a.jsx("option",{value:"Y",children:"Yes"}),a.jsx("option",{value:"N",children:"No"})]}),a.jsx("div",{className:"text-danger small",children:a.jsx(y,{name:"is_result_declare"})})]})}),a.jsxs("div",{id:"result-details",className:`row ${s.is_result_declare!=="Y"?"d-none":""}`,children:[a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:"form-group my-2",children:a.jsx(o,{control:"input",type:"text",label:"Obtained Marks",name:"obtained_marks",onInput:r=>{r.target.value=r.target.value.replace(/\D/g,"").slice(0,5)},required:!0})})}),a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:`form-group my-2 ${s.is_result_declare!=="Y"?"d-none":""}`,children:a.jsx(o,{control:"input",type:"text",label:"Total Marks",name:"total_marks",onInput:r=>{r.target.value=r.target.value.replace(/\D/g,"").slice(0,5)},required:!0})})}),a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:"form-group my-2",children:a.jsx(A,{name:"passing_year",label:"Passing Year",value:s.passing_year})})}),a.jsx("div",{className:"col-6 col-md-6",children:a.jsx("div",{className:"form-group my-2",children:a.jsx(o,{control:"date",type:"date",label:"Result Date",name:"result_date",disabled:s.is_result_declare!=="Y"})})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"form-group my-2",children:[a.jsxs("label",{htmlFor:"grading_as",children:["Grading As",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs(v,{as:"select",id:"grading_as",name:"grading_as",className:"form-control",onChange:r=>{e("grading_as",r.target.value),r.target.value==="G"&&e("grade",""),r.target.value==="C"&&e("cgpa",""),r.target.value===""&&(e("cgpa",""),e("grade",""))},children:[a.jsx("option",{value:"",children:"Select..."}),a.jsx("option",{value:"C",children:"CGPA"}),a.jsx("option",{value:"G",children:"GRADE"})]}),a.jsx("div",{className:"text-danger small",children:a.jsx(y,{name:"grading_as"})})]})}),a.jsx("div",{className:`col-6 col-md-3 ${s.grading_as!=="G"?"d-none":""}`,children:a.jsx("div",{className:"form-group my-2",children:a.jsx(o,{control:"select",className:"form-control",label:"Grade",name:"grade",required:!0,options:[{key:"A+",value:"A+"},{key:"A",value:"A"},{key:"B+",value:"B+"},{key:"B",value:"B"},{key:"C+",value:"C+"},{key:"C",value:"C"},{key:"D+",value:"D+"},{key:"D",value:"D"}]})})}),a.jsx("div",{className:`col-6 col-md-3 ${s.grading_as!=="C"?"d-none":""}`,children:a.jsx("div",{className:"form-group my-2",children:a.jsx(o,{control:"input",type:"text",label:"CGPA",name:"cgpa",required:!0,disabled:s.grading_as!=="C"})})})]})]}),a.jsx("div",{className:"d-flex justify-content-center gap-2 my-2",children:a.jsx($,{type:"submit",color:"primary",className:"btn btn-primary fs-5 rounded-pill my-2 p-2 px-4",disabled:n,children:n?"Saving...":"Save"})})]})})};export{B as Q};
