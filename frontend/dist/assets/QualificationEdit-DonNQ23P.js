import{f as R,r as T,w as N,u as O,i as L,j as l}from"./index-BFSWvyhh.js";import{u as G}from"./QualificationRequest-CBa2qH3U.js";import{A as g}from"./Alert-CXLFhIlH.js";import{Q as C}from"./QualificationForm-B4XfoWXa.js";import{c as h,a as i}from"./index.esm-DKed_wgO.js";import"./isSymbol-B98uY8n-.js";import"./formik.esm-Bg87zhII.js";import"./FormControl-BQZGBokq.js";import"./CConditionalPortal-DaAJL4r3.js";import"./CFormLabel-CbVdSG0w.js";import"./CustomSelect-BtwL3Ue1.js";import"./index.esm-BvQuuiUP.js";const V=()=>{const m=R(r=>r.auth.authData),[p,s]=T.useState(!1),o=N(),I=O(),{prevQual:e,return_url:n,announcement:A}=I.state||{},S=L(),f=async(r,{setSubmitting:t,resetForm:w})=>{var d,_,u,c;t(!1),s(!0);const D={...r,result_date:r.result_date?new Date(r.result_date).toISOString().split("T")[0]:"",institute_id:r.organization_id||0,cgpa:r.cgpa==""?0:r.cgpa,passing_year:r.is_result_declare=="N"?"":r.passing_year};try{const a=await G(D,e.QUALIFICATION_ID);if(S({type:"QUALIFICATION_COMPLETENESS_SUCCESS",payload:(d=a==null?void 0:a.data)==null?void 0:d.qualification_completeness}),g({status:!0,text:((_=a==null?void 0:a.data)==null?void 0:_.message)||"Qualification updated successfully"}),n){o(n,{state:{announcement:A}});return}o("/qualifications")}catch(a){g({status:!1,text:((c=(u=a.response)==null?void 0:u.data)==null?void 0:c.error_message)||"Some error occured"}),console.log(a)}s(!1)},q={user_id:m.user.USER_ID,degree_program:(e==null?void 0:e.degree.DEGREE_ID)||"",organization_id:(e==null?void 0:e.ORGANIZATION_ID)||(e==null?void 0:e.INSTITUTE_ID)||"",discipline_id:(e==null?void 0:e.DISCIPLINE_ID)||"",obtained_marks:(e==null?void 0:e.OBTAINED_MARKS)||"",total_marks:e.TOTAL_MARKS||"",major:e.MAJOR||"",passing_year:e.PASSING_YEAR||"",roll_no:e.ROLL_NO||"",is_result_declare:e.IS_RESULT_DECLARE||"",grading_as:e.GRADING_AS||"",result_date:e.RESULT_DATE||"",grade:e.GRADE||"",cgpa:e.CGPA||"",out_of:e.OUT_OF||""},E=h({degree_program:i().required("Level required"),discipline_id:i().required("Discipline required"),organization_id:i().required("Organization required"),roll_no:i().required("Roll No./Seat No. required"),is_result_declare:i().required(),obtained_marks:i().when("is_result_declare",(r,t)=>r=="Y"?t.required("Obtained Marks required"):t),total_marks:i().when("is_result_declare",(r,t)=>r=="Y"?t.required("Total Marks required"):t),grading_as:i().when("is_result_declare",(r,t)=>r=="Y"?t.required("Grading As required"):t),cgpa:i().when("grading_as",(r,t)=>r=="C"?t.required("CGPA required"):t),grade:i().when("grading_as",(r,t)=>r=="G"?t.required("Grade required"):t)});return l.jsx("div",{children:l.jsx(C,{initialValues:q,validationRules:E,handleSubmit:f,loading:p})})};export{V as default};
