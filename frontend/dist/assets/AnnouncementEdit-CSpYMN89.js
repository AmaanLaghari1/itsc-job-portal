import{f as q,r as s,w as f,u as A,i as D,j as d}from"./index-DrpCck3H.js";import{u as N}from"./AnnouncementRequest-oTMmNYuw.js";import{A as T}from"./Alert-CXLFhIlH.js";import{A as g}from"./AnnouncementForm-WiWxMFgi.js";import{c as I,b as u,a as r}from"./index.esm-Cv9wGfPn.js";import"./isSymbol-B98uY8n-.js";import"./formik.esm-DftA7rzV.js";import"./FormControl-C80XsXFS.js";import"./CConditionalPortal-C416BAvS.js";import"./CFormLabel-C5-wr04h.js";import"./CustomSelect-DZveazcM.js";import"./index.esm-D60Tj9fk.js";const F=()=>{q(t=>t.auth.authData);const[c,a]=s.useState(!1),n=f(),m=A(),{prevData:e}=m.state||{};s.useEffect(function(){e||n("/admin/dashboard")},[]),D();const _=async(t,{setSubmitting:l})=>{var o;a(!0),l(!1),t.start_date=new Date(t.start_date).toISOString().split("T")[0],t.end_date=new Date(t.end_date).toISOString().split("T")[0];try{const i=await N(t,e.ANNOUNCEMENT_ID);T({status:!0,text:((o=i==null?void 0:i.data)==null?void 0:o.message)||"Announcement updated successfully"}),n("/admin/dashboard")}catch(i){console.error("Error creating announcement:",i)}a(!1)},p={announcement_title:e.ANNOUNCEMENT_TITLE??"",position_name:e.POSITION_NAME??"",dept_id:e.department.DEPT_ID??"",description:e.DESCRIPTION??"",start_date:e.START_DATE??"",end_date:e.END_DATE??"",application_fee:e.APPLICATION_FEE??"",age_from:e.AGE_FROM??18,age_to:e.AGE_TO??"",qual_req_data:e.qualification_requirements,qualifications:e.qualification_requirements.map(t=>({key:t.DEGREE_ID,required:String(t.IS_REQUIRED)}))??[],experience_years:e.EXPERIENCE_YEARS??"",ref_no:e.REF_NO??""},E=I({announcement_title:r().required("Title required").max(255,"Title is too long"),position_name:r().required("Position Name required"),ref_no:r().required("Reference No required"),dept_id:r().required("Department required"),start_date:r().required("Start Date required"),end_date:r().required("End Date required"),description:r().required("Description required").min(100,"Description too short"),age_from:u().required("Age Limit is required"),age_to:u().required("Age Limit is required")});return d.jsx("div",{children:d.jsx(g,{initialValues:p,validationRules:E,handleSubmit:_,loading:c})})};export{F as default};
