import{u as Y,w as H,f as J,r as t,j as s,n as p,L as Q}from"./index-BFSWvyhh.js";import{c as V}from"./ApplicationRequest-BlVA9grW.js";import{A as g}from"./Alert-CXLFhIlH.js";import{a as b,c as f}from"./index.esm-BvQuuiUP.js";import{j as z}from"./isSymbol-B98uY8n-.js";import{g as W}from"./QualificationRequest-CBa2qH3U.js";import{g as K}from"./ExperienceRequest-B01sxlBJ.js";import{C as X,a as Z}from"./CCardBody-Bt37Gv7-.js";import{C as h}from"./CCardHeader-BjMuWU9g.js";import{C as E}from"./CCardTitle-D8MwU8ht.js";import{c as _}from"./cil-pen-53d2I-C-.js";import{C as l,a as e}from"./CRow-zVXjQc30.js";const Ns=()=>{const v=Y(),{announcement:c,prevData:$}=v.state||{},N=H(),r=J(a=>a.auth.authData),[q,x]=t.useState(!1),[A,L]=t.useState([]),[u,G]=t.useState([]);t.useEffect(()=>{c||N("/announcements")},[]);async function P(){x(!0);const a=await W(r.user.USER_ID);L(a.data.data),x(!1)}t.useEffect(()=>{P()},[]);async function U(){x(!0);const a=await K(r.user.USER_ID);G(a.data.data),x(!1)}t.useEffect(()=>{U()},[]);const[j,B]=t.useState({}),F=async()=>{var n,m,i;const a={announcement_id:c.ANNOUNCEMENT_ID,user_id:r.user.USER_ID,profile_image:r.user.PROFILE_IMAGE,apply_date:new Date().toISOString().split("T")[0],first_name:r.user.FIRST_NAME,last_name:r.user.LAST_NAME,fname:r.user.FNAME,cnic_no:r.user.CNIC_NO,mobile_no:r.user.MOBILE_NO,email:r.user.EMAIL,gender:r.user.GENDER,marital_status:r.user.MARITAL_STATUS,religion:r.user.RELIGION,date_of_birth:new Date(r.user.DATE_OF_BIRTH),place_of_birth:r.user.PLACE_OF_BIRTH,home_address:r.user.HOME_ADDRESS,permanent_address:r.user.PERMANENT_ADDRESS,country_id:r.user.COUNTRY_ID,province_id:r.user.PROVINCE_ID,district_id:r.user.DISTRICT_ID},o=new FormData;o.append("payload",JSON.stringify(a)),o.append("application_qualification",JSON.stringify(I)),o.append("application_experience",JSON.stringify(u));try{const d=await V(o);d.status===200&&(console.log(d),N("/dashboard"),(n=d.data)!=null&&n.redirect_url?window.location.href=d.data.redirect_url:g({status:!0,text:"Application submitted successfully"}))}catch(d){console.error(d),g({status:!1,text:((i=(m=d.response)==null?void 0:m.data)==null?void 0:i.error_message)||"Error submitting application"})}};t.useEffect(()=>{(async(o,n=null,m=null)=>{try{const i=await z.get("https://careers.usindh.edu.pk/backend/api/user/get-user-detail/"+o+"/"+n+"/"+m);B(d=>{var D,w,R,T,S,C,O,y,M;return{...d,country:((R=(w=(D=i.data)==null?void 0:D.data)==null?void 0:w.country[0])==null?void 0:R.COUNTRY_NAME)||"",province:((C=(S=(T=i.data)==null?void 0:T.data)==null?void 0:S.province[0])==null?void 0:C.PROVINCE_NAME)||"",district:((M=(y=(O=i.data)==null?void 0:O.data)==null?void 0:y.district[0])==null?void 0:M.DISTRICT_NAME)||""}})}catch(i){console.error("Error fetching user details:",i);return}})(r.user.COUNTRY_ID,r.user.DOMICILE_PROVINCE||null,r.user.DISTRICT_ID||null)},[]);const k=(a,o)=>!a||!o?[]:a.filter(n=>o.some(m=>m.DEGREE_ID===n.degree.DEGREE_ID)),I=t.useMemo(()=>k(A,c==null?void 0:c.qualification_requirements),[A,c==null?void 0:c.qualification_requirements]);return s.jsx("div",{children:s.jsxs(X,{className:"shadow shadow-lg my-5 border-0",children:[s.jsx("div",{className:"text-center",children:s.jsx("h1",{className:"display-4",children:"Review Application"})}),s.jsxs(Z,{children:[s.jsxs("p",{children:["Please review your application details before submitting. Ensure all information is correct and complete to avoid any issues with your application. ",s.jsx("br",{}),"You will not be able to edit your application after submission.",s.jsxs("span",{className:"",children:[" If you have any questions, please contact us at ",s.jsx("a",{href:"mailto:usindh.edu.pk",className:"text-decoration-none",children:"usindh.edu.pk"}),"."]}),s.jsx("br",{}),s.jsx("br",{})]}),s.jsxs("div",{className:"card shadow shadow-sm my-3 w-100 p-0 my-2",children:[s.jsxs(h,{className:"fw-bolder d-flex align-items-center",children:[s.jsx(E,{className:"h5 my-2",children:"Basic Information"}),s.jsx("div",{className:"ms-auto",children:s.jsx(b,{variant:"success",color:"success",className:"btn btn-outline-success btn-sm mx-1",onClick:()=>N("/user-profile",{state:{return_url:"/confirm-application",announcement:c}}),children:s.jsx(f,{icon:_,size:"md"})})})]}),s.jsxs("div",{className:"d-flex flex-column gap-2 p-3",children:[s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Name"}),s.jsx(e,{sm:4,className:"border-bottom border-1 fw-bold p-2 ",children:r.user.FIRST_NAME||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Surname"}),s.jsx(e,{sm:4,className:"border-bottom border-1  p-2 fw-bold",children:r.user.LAST_NAME||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Email"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.EMAIL||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"CNIC No."}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.CNIC_NO||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Father's Name"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.FNAME||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Mobile No."}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.MOBILE_NO||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"Date of Birth"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:p(r.user.DATE_OF_BIRTH)||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"Place of Birth"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.PLACE_OF_BIRTH||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Gender"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.GENDER=="M"?"MALE":r.user.GENDER=="F"?"FEMALE":""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"RELIGION"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.RELIGION||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"MARITAL STATUS"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.MARITAL_STATUS==1?"SINGLE":r.user.MARITAL_STATUS==2?"MARRIED":r.user.MARITAL_STATUS==3?"WIDOWED":"DIVORCED"}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"COUNTRY"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:j.country||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"DOMICILE PROVINCE"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:j.province||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"DOMICILE DISTRICT"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:j.district||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"PERMANENT ADDRESS"}),s.jsx(e,{sm:10,className:"border-bottom border-1 p-2 fw-bold",children:r.user.PERMANENT_ADDRESS||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"HOME ADDRESS"}),s.jsx(e,{sm:10,className:"border-bottom border-1 p-2 fw-bold",children:r.user.HOME_ADDRESS||""})]})]})]}),s.jsxs("div",{className:"card shadow shadow-sm my-3 w-100 p-0 my-2",children:[s.jsx(h,{className:"fw-bolder d-flex align-items-center",children:s.jsx(E,{className:"h5 my-2",children:"Qualifications"})}),I.map((a,o)=>s.jsxs("div",{children:[s.jsxs(h,{className:"fw-bolder d-flex align-items-center",children:[a.degree.DEGREE_TITLE||"Qualification "+(o+1),s.jsx("div",{className:"ms-auto",children:s.jsx(b,{variant:"success",color:"success",className:"btn btn-outline-success btn-sm mx-1",onClick:()=>N("/qualification-edit",{state:{prevQual:a,return_url:"/confirm-application",announcement:c}}),children:s.jsx(f,{icon:_,size:"md"})})})]}),s.jsxs("div",{className:"d-flex flex-column gap-2 p-3",children:[s.jsxs(l,{className:"",children:[s.jsx(e,{sm:3,children:"Board/University Name"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.organization.INSTITUTE_NAME})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Discipline"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.discipline.DISCIPLINE_NAME})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Major Subject"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.MAJOR||"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Roll No."}),s.jsx(e,{sm:3,className:"fw-bold",children:a.ROLL_NO||"-"}),s.jsx(e,{sm:3,children:a.GRADING_AS=="G"?"Grade":"CGPA"}),s.jsx(e,{sm:3,className:"fw-bold",children:a.GRADE||a.CGPA||"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Obtained Marks"}),s.jsx(e,{sm:3,className:"fw-bold",children:a.OBTAINED_MARKS||"-"}),s.jsx(e,{sm:3,children:"Total Marks"}),s.jsx(e,{sm:3,className:"fw-bold",children:a.TOTAL_MARKS||"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Passing Year"}),s.jsx(e,{sm:3,className:"fw-bold",children:a.PASSING_YEAR||"-"}),s.jsx(e,{sm:3,children:"Result Declaration Date"}),s.jsx(e,{sm:3,className:"fw-bold",children:p(a.RESULT_DATE)||"-"})]})]})]},o))]}),u.length>0&&s.jsxs("div",{className:"card shadow shadow-sm my-3 w-100 p-0 my-2",children:[s.jsx(h,{className:"fw-bolder d-flex align-items-center",children:s.jsx(E,{className:"h5 my-2",children:"Experience"})}),u.map((a,o)=>s.jsx("div",{children:s.jsxs("div",{className:"card w-100 p-0",children:[s.jsxs(h,{className:"fw-bolder d-flex",children:[a.ORGANIZATION_NAME,s.jsx("div",{className:"ms-auto",children:s.jsx(b,{variant:"success",color:"success",className:"btn btn-outline-success btn-sm mx-1",onClick:()=>{N("/experience-edit",{state:{prevExp:a,return_url:"/confirm-application",announcement:c}})},children:s.jsx(f,{icon:_,size:"md"})})})]}),s.jsxs("div",{className:"d-flex flex-column gap-2 p-3 small",children:[s.jsxs(l,{className:"",children:[s.jsx(e,{sm:3,className:"",children:"Employment Type"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.EMP_TYPE})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Job Description"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.JOB_DESCRIPTION})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Salary"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.SALARY??"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Employer Contact No."}),s.jsx(e,{sm:9,className:"fw-bold",children:a.CONTACT_NO})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Start Date"}),s.jsx(e,{sm:3,className:"fw-bold",children:p(a.START_DATE)||"-"}),s.jsx(e,{sm:3,className:"",children:"End Date"}),s.jsx(e,{sm:3,className:"fw-bold",children:a.IS_JOB_CONTINUE==="Y"?"Currently Working":p(a.END_DATE)||"-"})]}),a.IS_JOB_CONTINUE!=="Y"&&s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Reason for leaving"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.REASON_FOR_LEAVING||"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Address"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.ADDRESS||"-"})]})]})]},a.EXPERIANCE_ID)},o))]}),s.jsx("div",{className:"rounded-0",children:s.jsxs("p",{className:"fw-bold",children:[s.jsx("strong",{children:"Note:"})," Once you clicked on apply button, it will be considered final."]})})]}),s.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-2 my-2",children:[s.jsx(b,{color:"primary",className:"rounded-2 p-2 fs-5 shadow shadow-sm px-3 mt-3",onClick:()=>{F()},children:"Apply Now"}),s.jsx(Q,{to:"/announcements",children:s.jsx(b,{color:"danger",className:"rounded-2 p-2 fs-5 shadow shadow-sm px-3 mt-3",children:"Cancel"})})]})]})})};export{Ns as default};
