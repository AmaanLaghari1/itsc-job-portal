import{w as A,j as s,n as x,r as l,f as p,C as f,L as N}from"./index-DrpCck3H.js";import{C as I,a as T}from"./CCardBody-nX4X9_XO.js";import{C as j}from"./DefaultLayout-Bi_UFO97.js";import{C}from"./CCardTitle-CNLQud-q.js";import{C as _}from"./CCardText-Bu7hpMGT.js";import{a as P}from"./index.esm-D60Tj9fk.js";import{b as w}from"./ApplicationRequest-CxnVmjDH.js";import{j as b}from"./isSymbol-B98uY8n-.js";import D from"./AdminDashboard-Cd8wmbKj.js";import"./AuthAction-Bnnw91pu.js";import"./CConditionalPortal-C416BAvS.js";import"./AnnouncementRequest-oTMmNYuw.js";import"./DynamicDataTable-CHQKT7te.js";import"./AlertConfirm-MJ-uUc8x.js";import"./Alert-CXLFhIlH.js";const S=({application:e})=>{var t,o,c,i,d,a;const r=A();return s.jsx("div",{className:"w-100 my-3",children:s.jsx(I,{className:"shadow shadow-sm",children:s.jsxs(T,{children:[s.jsx(j,{color:((t=e.application_status)==null?void 0:t.APPLICATION_STATUS_ID)===1||((o=e.application_status)==null?void 0:o.APPLICATION_STATUS_ID)===3||((c=e.application_status)==null?void 0:c.APPLICATION_STATUS_ID)===4?"success":"danger",className:"p-1 px-3 rounded-5 my-2 shadow shadow-lg",children:(i=e.application_status)==null?void 0:i.STATUS}),s.jsx(C,{className:"fw-bolder",children:e.announcement.ANNOUNCEMENT_TITLE??"NA"}),s.jsxs("div",{children:[s.jsx("span",{className:"fw-bold",children:"Position: "}),e.announcement.POSITION_NAME??"NA"]}),s.jsxs("div",{children:[s.jsx("span",{className:"fw-bold",children:"Department: "}),((d=e.announcement)==null?void 0:d.department.DEPT_NAME)??"NA"]}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[s.jsxs(_,{className:"my-auto text-muted small fw-bold",children:["Applied on: ",x(e.APPLY_DATE)]}),s.jsxs("div",{className:"d-flex flex-wrap gap-2 my-2",children:[((a=e.application_status)==null?void 0:a.APPLICATION_STATUS_ID)!==1?s.jsx("a",{href:"https://careers.usindh.edu.pk/backend/pdf/"+btoa(e.APPLICATION_ID),className:"btn btn-sm btn-outline-danger rounded-pill px-3",download:"itsc_application",children:"Download Challan"}):s.jsx("a",{href:"https://careers.usindh.edu.pk/backend/application-pdf/"+btoa(e.APPLICATION_ID),className:"btn btn-sm btn-outline-success rounded-pill px-3",download:"itsc_application",children:"Download Form"}),s.jsx(P,{className:"rounded-pill px-3",color:"secondary",size:"sm",onClick:()=>{r("/announcement-detail",{state:{announcement:e.announcement}})},children:"View Announcement"})]})]})]})})})},q=()=>{const[e,r]=l.useState(!1),[t,o]=l.useState([]),c=p(a=>a.auth.authData),i=p(a=>a.roles.selectedRole);async function d(){r(!0);try{const u=(await w(c.user.USER_ID)).data.data,h=await Promise.all(u.map(async n=>{if(n.application_status.STATUS==="UNPAID")try{if((await b.get("https://careers.usindh.edu.pk/backend/api/application/verify-challan/"+n.APPLICATION_ID)).data.status)return{...n,application_status:{...n.application_status,STATUS:"APPLIED",APPLICATION_STATUS_ID:1}}}catch(m){console.error("Error fetching payment status:",m)}return n}));o(h)}catch{}r(!1)}return l.useEffect(()=>{d()},[]),i==4?s.jsxs("div",{children:[s.jsx("div",{className:"border-bottom border-3 border-primary p-2",children:s.jsx("h3",{children:"My Applications"})}),s.jsx("div",{className:"d-flex flex-wrap",children:e?s.jsx(f,{className:"align-slef-start my-3",color:"primary"}):t.length>0?t.map(a=>s.jsx(S,{application:a},a.APPLICATION_ID)):s.jsx("div",{className:"d-flex justify-content-center w-100",children:s.jsxs("div",{className:"fst-italic my-5 py-5",children:["You have no application applied! ",s.jsx(N,{to:"/announcements",className:"text-decoration-none",children:"Apply Now"})]})})})]}):s.jsx(D,{})};export{q as default};
