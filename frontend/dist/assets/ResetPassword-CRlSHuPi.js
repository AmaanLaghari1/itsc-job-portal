import{f as w,v as g,w as b,r as c,j as s}from"./index-DrpCck3H.js";/* empty css              */import{g as j}from"./gaurd-Ci8kRv3r.js";import{l as N,b as v,v as y,s as P}from"./isSymbol-B98uY8n-.js";import{F as k,a as _,b as m,E as p}from"./formik.esm-DftA7rzV.js";import{c as F,a as h,d as S}from"./index.esm-Cv9wGfPn.js";import{A as t}from"./Alert-CXLFhIlH.js";const C=()=>{const x=w(a=>a.ui.theme),[f]=g(),d=b(),i=f.get("token"),[l,n]=c.useState(!1);c.useEffect(()=>{async function a(r){var e;try{const o=await y(r)}catch(o){t({status:!1,text:((e=o==null?void 0:o.data)==null?void 0:e.message)||"Token invalid or expired."}),d("/login")}}a(i)},[]);const u=async(a,{setSubmitting:r})=>{r(!1),n(!0);const e=await P(a);e.status===200?(t({status:!0,text:e.data.message||"Password changed."}),d("/login")):t({status:!1,text:e.data.error_message||"Password changing failed."}),n(!1)};return s.jsx("div",{children:s.jsxs("div",{style:{minHeight:"100vh",zIndex:1},className:"d-flex align-items-center position-relative w-100 p-2",children:[s.jsx("div",{className:"col-12 col-sm-5 position-absolute top-0 h-100 d-none d-lg-block p-2",children:s.jsx("div",{className:"bg-secondary h-100 rounded-5 d-block m-auto"})}),s.jsx("div",{className:"container position-relative z-1",children:s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-7 d-none d-lg-flex justify-content-end",children:s.jsx("img",{src:j,alt:"",className:"w-75 d-block ms-auto"})}),s.jsx("div",{className:"col-12 col-lg-5",children:s.jsxs("div",{className:"col-10 mx-auto",children:[s.jsx("img",{src:x=="dark"?N:v,width:"200",className:"mt-3",alt:"Usindh Logo"}),s.jsx("h3",{className:"fw-bold mt-5 mb-4",children:"Reset Your Password"}),s.jsx(k,{initialValues:{forget_password:i||"",password:"",password_confirmation:""},validationSchema:F({password:h().required("New password required!"),password_confirmation:h().required("Confirm password required!").oneOf([S("password"),null],"Passwords must match!")}),onSubmit:u,children:s.jsxs(_,{children:[s.jsxs("div",{className:"form-group my-2",children:[s.jsxs("label",{className:"form-label",htmlFor:"cnic_no",children:["New Password",s.jsx("span",{className:"text-danger fw-bold",children:"*"})]}),s.jsx(m,{type:"password",className:"form-control border-0 border-bottom border-3 rounded-0",placeholder:"********",name:"password",id:"password"}),s.jsx("div",{className:"small text-danger",children:s.jsx(p,{name:"password"})})]}),s.jsxs("div",{className:"form-group my-2",children:[s.jsxs("label",{className:"form-label",htmlFor:"cnic_no",children:["Confirm Password",s.jsx("span",{className:"text-danger fw-bold",children:"*"})]}),s.jsx(m,{type:"password",className:"form-control border-0 border-bottom border-3 rounded-0",placeholder:"********",name:"password_confirmation",id:"password_confirmation"}),s.jsx("div",{className:"small text-danger",children:s.jsx(p,{name:"password_confirmation"})})]}),s.jsx("button",{className:"btn btn-primary btn-sm bg-primary shadow shadow-sm rounded-pill p-3 px-5 mt-4",type:"submit",disabled:l,children:l?"Resetting...":"Reset"})]})})]})})]})})]})})};export{C as default};
