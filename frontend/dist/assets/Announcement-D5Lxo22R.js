import{f as j,r,A as C,j as s,q as p,C as y}from"./index-CFt1f066.js";import{a as A}from"./AnnouncementRequest-CvoZS0z3.js";import{e as E}from"./ApplicationRequest-BkvVguV1.js";import{a as x,c as N}from"./index.esm-DJsCAX2S.js";import{C as b,a as w}from"./CCardBody-BznE4ENn.js";import{C as g}from"./CCardTitle-DQ-GefZx.js";import{C as h}from"./CCardText-D3UGvK2o.js";var v=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='359.873 121.377 337.246 144.004 433.243 240.001 16 240.001 16 240.002 16 272.001 16 272.002 433.24 272.002 337.246 367.996 359.873 390.623 494.498 256 359.873 121.377' class='ci-primary'/>"],D=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M425.706,86.294A240,240,0,0,0,86.294,425.705,240,240,0,0,0,425.706,86.294ZM256,48A207.1,207.1,0,0,1,391.528,98.345L98.345,391.528A207.1,207.1,0,0,1,48,256C48,141.309,141.309,48,256,48Zm0,416a207.084,207.084,0,0,1-134.986-49.887l293.1-293.1A207.084,207.084,0,0,1,464,256C464,370.691,370.691,464,256,464Z' class='ci-primary'/>"];const T=({announcement:e})=>{const i=j(t=>t.auth.authData),[o,c]=r.useState(!1),l=r.useRef(!1),[a,f]=r.useState(""),d=C(),u=async t=>{var n;try{const m=await E(t);c(!0)}catch(m){f((n=m.response)==null?void 0:n.data.error_message),c(!1)}};return r.useEffect(()=>{if(l.current)return;const t=new FormData;t.append("announcement_id",e.ANNOUNCEMENT_ID),t.append("user_id",i.user.USER_ID),u(t),l.current=!0},[e,i]),new DOMParser,s.jsx(b,{className:"shadow shadow-sm my-3",children:s.jsxs(w,{children:[s.jsx(g,{className:"fw-bolder",children:e.ANNOUNCEMENT_TITLE??"NA"}),s.jsxs("div",{children:[s.jsx("span",{className:"fw-bold",children:"Position: "}),e.POSITION_NAME??"NA"]}),s.jsxs("div",{children:[s.jsx("span",{className:"fw-bold",children:"Department: "}),(e==null?void 0:e.department.DEPT_NAME)??"NA"]}),s.jsx("div",{className:"border-bottom border-1 mb-2 border-secondary-subtle"}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[s.jsxs("div",{className:"d-flex flex-column",children:[s.jsxs(h,{className:"mb-0 text-muted small",children:["Posted: ",p(e.START_DATE)||""]}),s.jsxs(h,{className:"text-muted small mt-0",children:["Last date to apply: ",p(e.END_DATE)||""]})]}),s.jsxs("div",{className:"d-flex justify-content-end",children:[s.jsx(x,{color:"secondary",className:"btn-sm rounded-5 shadow shadow-sm mx-1 px-3 mt-3",onClick:()=>{d("/announcement-detail",{state:{announcement:e}})},children:"View Details"}),o&&s.jsxs(x,{color:"primary",className:"btn-sm rounded-5 shadow shadow-sm px-3 mt-3",onClick:()=>{d("/confirm-application",{state:{announcement:e}})},children:["Apply Now ",s.jsx(N,{icon:v})]})]})]}),a&&s.jsxs("strong",{className:"fw-bold text-danger",children:[s.jsx(N,{icon:D})," ",a]})]})},e.ANNOUNCEMENT_ID)},U=()=>{const[e,i]=r.useState(!1),[o,c]=r.useState([]);async function l(){i(!0);try{const a=await A();c(a.data.data)}catch{}i(!1)}return r.useEffect(()=>{l()},[]),s.jsxs("div",{children:[s.jsx("div",{className:"border-bottom border-3 border-primary p-2",children:s.jsx("h3",{children:"Announcements"})}),e?s.jsx(y,{className:"align-self-start my-3",color:"primary"}):s.jsx("div",{className:"w-100 my-3",children:o&&o.length>0?o.map(a=>s.jsx(T,{announcement:a},a.ANNOUNCEMENT_ID)):s.jsx("p",{className:"text-center fst-italic my-5 py-5",children:"No announcements available at the moment!"})})]})};export{U as default};
