import{j as s,r as t,q as E,K as B,u as k,A as Y}from"./index-CFt1f066.js";import{F as Q,a as H,b as P}from"./formik.esm-DGj08CUs.js";import{F as A}from"./FormControl-CxxYqU6g.js";import{a as V}from"./index.esm-DJsCAX2S.js";import{u as J}from"./ApplicationRequest-BkvVguV1.js";import{A as U}from"./Alert-CXLFhIlH.js";import{c as K}from"./index.esm-g-bgoICI.js";import{g as W}from"./QualificationRequest-CgT17vlK.js";import{g as z}from"./ExperienceRequest-DueTU2yU.js";import{C as x}from"./CCardHeader-LYpDkAY5.js";import{C as S}from"./CCardTitle-DQ-GefZx.js";import{C as a,a as e}from"./CRow-eURKCggM.js";import"./isSymbol-ByaixRsz.js";import"./CConditionalPortal-DZpQ5pqL.js";import"./CFormLabel-Dy6tVY1e.js";const X=({initialValues:l,validationRules:n,handleSubmit:b})=>s.jsx("div",{children:s.jsx(Q,{initialValues:l,validationSchema:n,onSubmit:b,children:({values:d,setFieldValue:o})=>s.jsxs(H,{children:[s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-sm-6",children:s.jsx("div",{className:"form-group my-2",children:s.jsx(A,{control:"input",name:"channel",label:"Payment Channel",required:!0})})}),s.jsx("div",{className:"col-sm-6",children:s.jsx("div",{className:"form-group my-2",children:s.jsx(A,{control:"input",name:"paid_amount",label:"Paid Amount",required:!0})})})]}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-sm-6",children:s.jsxs("div",{className:"form-group my-2",children:[s.jsx("label",{className:"form-label",htmlFor:"active",children:"Active"}),s.jsxs(P,{as:"select",id:"active",name:"active",value:d.active,className:"form-control",onChange:h=>{o("active",h.target.value)},children:[s.jsx("option",{value:1,children:"Yes"}),s.jsx("option",{value:0,children:"No"})]})]})}),s.jsx("div",{className:"col-sm-6",children:s.jsxs("div",{className:"form-group my-2",children:[s.jsx("label",{className:"form-label",htmlFor:"application_status",children:"Application Status"}),s.jsxs(P,{as:"select",id:"application_status",name:"application_status",value:d.application_status,className:"form-control",onChange:h=>{o("application_status",h.target.value)},children:[s.jsx("option",{value:1,children:"Applied"}),s.jsx("option",{value:2,children:"Unpaid"}),s.jsx("option",{value:3,children:"Shortlisted"}),s.jsx("option",{value:4,children:"Selected"}),s.jsx("option",{value:5,children:"Rejected"})]})]})})]}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-sm-3",children:s.jsx("div",{className:"form-group my-2",children:s.jsx(A,{control:"date",name:"apply_date",label:"Apply Date",required:!0})})}),s.jsx("div",{className:"col-sm-6",children:s.jsx("div",{className:"form-group my-2",children:s.jsx(A,{control:"input",name:"remarks",label:"Remarks",required:!1})})})]}),s.jsx(V,{variant:"primary",type:"submit",className:"btn btn-primary fs-5 mx-auto d-block rounded-0 px-3 my-3",children:"Save"})]})})}),Z=({prevData:l,announcement:n})=>{var T;const[b,d]=t.useState(!1),[o,h]=t.useState({}),[j,I]=t.useState([]),[p,i]=t.useState([]),_=async(r,c=null,R=null)=>{try{const N=await B.get("https://careers.usindh.edu.pk/backend/api/user/get-user-detail/"+r+"/"+c+"/"+R);h(F=>{var w,g,C,D,O,y,M,v,L;return{...F,country:((C=(g=(w=N.data)==null?void 0:w.data)==null?void 0:g.country[0])==null?void 0:C.COUNTRY_NAME)||"",province:((y=(O=(D=N.data)==null?void 0:D.data)==null?void 0:O.province[0])==null?void 0:y.PROVINCE_NAME)||"",district:((L=(v=(M=N.data)==null?void 0:M.data)==null?void 0:v.district[0])==null?void 0:L.DISTRICT_NAME)||""}})}catch(N){console.error("Error fetching user details:",N);return}};async function u(){d(!0);const r=await W(l.USER_ID);I(r.data.data),d(!1)}async function f(){d(!0);const r=await z(l.USER_ID);i(r.data.data),d(!1)}t.useEffect(()=>{_(l.COUNTRY_ID,l.PROVINCE_ID||null,l.DISTRICT_ID||null),u(),f()},[]);const m=(r,c)=>!r||!c?[]:r.filter(R=>c.some(N=>N.DEGREE_ID===R.degree.DEGREE_ID)),G=t.useMemo(()=>{var r;return m(j,(r=n[0])==null?void 0:r.qualification_requirements)},[j,(T=n[0])==null?void 0:T.qualification_requirements]);return s.jsxs("div",{children:[s.jsxs("div",{className:"card shadow shadow-sm my-3 w-100 p-0 my-2",children:[s.jsx(x,{className:"fw-bolder d-flex align-items-center",children:s.jsx(S,{className:"h5 my-2",children:"Basic Information"})}),s.jsxs("div",{className:"d-flex flex-column gap-2 p-3",children:[s.jsx(a,{className:"mx-2",children:s.jsx(e,{sm:12,children:s.jsxs(a,{children:[s.jsx(e,{md:3,children:s.jsx("img",{src:"https://careers.usindh.edu.pk/resource/uploads/"+l.PROFILE_IMAGE,alt:"User Image",className:"img-thumbnail",style:{width:"16rem",height:"16rem"}})}),s.jsxs(e,{md:9,children:[s.jsxs(a,{children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Name"}),s.jsx(e,{sm:10,className:"border-bottom border-1 fw-bold p-2 ",children:l.FIRST_NAME||""})]}),s.jsxs(a,{children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Surname"}),s.jsx(e,{sm:10,className:"border-bottom border-1 fw-bold p-2 ",children:l.LAST_NAME||""})]}),s.jsxs(a,{children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Email"}),s.jsx(e,{sm:10,className:"border-bottom border-1 fw-bold p-2 ",children:l.EMAIL||""})]}),s.jsxs(a,{children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"CNIC No."}),s.jsx(e,{sm:10,className:"border-bottom border-1 fw-bold p-2 ",children:l.CNIC_NO||""})]}),s.jsxs(a,{children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Father's Name"}),s.jsx(e,{sm:10,className:"border-bottom border-1 fw-bold p-2 ",children:l.FNAME||""})]}),s.jsxs(a,{children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Mobile No."}),s.jsx(e,{sm:10,className:"border-bottom border-1 fw-bold p-2 ",children:l.MOBILE_NO||""})]})]})]})})}),s.jsxs(a,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"Date of Birth"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:E(l.DATE_OF_BIRTH)||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"Place of Birth"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:l.PLACE_OF_BIRTH||""})]}),s.jsxs(a,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Gender"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:l.GENDER=="M"?"MALE":l.GENDER=="F"?"FEMALE":""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"RELIGION"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:l.RELIGION||""})]}),s.jsxs(a,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"MARITAL STATUS"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:l.MARITAL_STATUS==1?"SINGLE":l.MARITAL_STATUS==2?"MARRIED":l.MARITAL_STATUS==3?"WIDOWED":"DIVORCED"}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"COUNTRY"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:o.country||""})]}),s.jsxs(a,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"DOMICILE PROVINCE"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:o.province||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"DOMICILE DISTRICT"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:o.district||""})]}),s.jsxs(a,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"PERMANENT ADDRESS"}),s.jsx(e,{sm:10,className:"border-bottom border-1 p-2 fw-bold",children:l.PERMANENT_ADDRESS||""})]}),s.jsxs(a,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"HOME ADDRESS"}),s.jsx(e,{sm:10,className:"border-bottom border-1 p-2 fw-bold",children:l.HOME_ADDRESS||""})]})]})]}),s.jsxs("div",{className:"card shadow shadow-sm my-3 w-100 p-0 my-2",children:[s.jsx(x,{className:"fw-bolder d-flex align-items-center",children:s.jsx(S,{className:"h5 my-2",children:"Qualifications"})}),G.map((r,c)=>s.jsxs("div",{children:[s.jsx(x,{className:"fw-bolder d-flex align-items-center",children:r.degree.DEGREE_TITLE||"Qualification "+(c+1)}),s.jsxs("div",{className:"d-flex flex-column gap-2 p-3",children:[s.jsxs(a,{className:"",children:[s.jsx(e,{sm:3,children:"Board/University Name"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.organization.INSTITUTE_NAME})]}),s.jsxs(a,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Discipline"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.discipline.DISCIPLINE_NAME})]}),s.jsxs(a,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Major Subject"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.MAJOR||"-"})]}),s.jsxs(a,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Roll No."}),s.jsx(e,{sm:3,className:"fw-bold",children:r.ROLL_NO||"-"}),s.jsx(e,{sm:3,children:r.GRADING_AS=="G"?"Grade":"CGPA"}),s.jsx(e,{sm:3,className:"fw-bold",children:r.GRADE||r.CGPA||"-"})]}),s.jsxs(a,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Obtained Marks"}),s.jsx(e,{sm:3,className:"fw-bold",children:r.OBTAINED_MARKS||"-"}),s.jsx(e,{sm:3,children:"Total Marks"}),s.jsx(e,{sm:3,className:"fw-bold",children:r.TOTAL_MARKS||"-"})]}),s.jsxs(a,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Passing Year"}),s.jsx(e,{sm:3,className:"fw-bold",children:r.PASSING_YEAR||"-"}),s.jsx(e,{sm:3,children:"Result Declaration Date"}),s.jsx(e,{sm:3,className:"fw-bold",children:E(r.RESULT_DATE)||"-"})]})]})]},c))]}),p.length>0&&s.jsxs("div",{className:"card shadow shadow-sm my-3 w-100 p-0 my-2",children:[s.jsx(x,{className:"fw-bolder d-flex align-items-center",children:s.jsx(S,{className:"h5 my-2",children:"Experience"})}),p.map((r,c)=>s.jsx("div",{children:s.jsxs("div",{className:"card w-100 p-0",children:[s.jsx(x,{className:"fw-bolder d-flex",children:r.ORGANIZATION_NAME}),s.jsxs("div",{className:"d-flex flex-column gap-2 p-3 small",children:[s.jsxs(a,{className:"",children:[s.jsx(e,{sm:3,className:"",children:"Employment Type"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.EMP_TYPE})]}),s.jsxs(a,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Job Description"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.JOB_DESCRIPTION})]}),s.jsxs(a,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Salary"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.SALARY??"-"})]}),s.jsxs(a,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Employer Contact No."}),s.jsx(e,{sm:9,className:"fw-bold",children:r.CONTACT_NO})]}),s.jsxs(a,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Start Date"}),s.jsx(e,{sm:3,className:"fw-bold",children:E(r.START_DATE)||"-"}),s.jsx(e,{sm:3,className:"",children:"End Date"}),s.jsx(e,{sm:3,className:"fw-bold",children:r.IS_JOB_CONTINUE==="Y"?"Currently Working":E(r.END_DATE)||"-"})]}),r.IS_JOB_CONTINUE!=="Y"&&s.jsxs(a,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Reason for leaving"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.REASON_FOR_LEAVING||"-"})]}),s.jsxs(a,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Address"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.ADDRESS||"-"})]})]})]},r.EXPERIANCE_ID)},c))]})]})},Ns=()=>{const[l,n]=t.useState(!1),b=k(),d=Y(),{prevData:o,announcement:h}=b.state||{};t.useEffect(function(){o||d("/admin/applications")},[]);const j={announcement_id:o.ANNOUNCEMENT_ID??"",apply_date:o.APPLY_DATE??"",paid_date:o.PAID_DATE??"",paid_amount:o.PAID_AMOUNT??"",active:o.ACTIVE??0,application_status:o.APPLICATION_STATUS??1,remarks:o.REMARKS??""},I=K({}),p=async(i,{setSubmitting:_})=>{var u,f;n(!0),_(!1),i.apply_date=new Date(i.apply_date).toISOString().split("T")[0],i.paid_date=i.paid_date?new Date(i.paid_date).toISOString().split("T")[0]:null;try{const m=await J(i,o.APPLICATION_ID);U({status:!0,text:((u=m.data)==null?void 0:u.message)||"Application updated successfully"}),d("/admin/applications")}catch(m){console.log(m),U({status:!1,text:((f=m==null?void 0:m.data)==null?void 0:f.message)||"Application update failed"})}n(!1)};return s.jsxs("div",{children:[s.jsx(Z,{prevData:o,announcement:h}),s.jsx(X,{initialValues:j,validationRules:I,handleSubmit:p,loading:l})]})};export{Ns as default};
