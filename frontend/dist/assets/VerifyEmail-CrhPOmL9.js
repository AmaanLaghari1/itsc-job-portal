import{f as v,i as N,u as y,w as k,r as l,j as e}from"./index-BFSWvyhh.js";import{F as w,a as S,b as E,E as I}from"./formik.esm-Bg87zhII.js";import{c as R,b as T}from"./index.esm-DKed_wgO.js";import{l as D,b as F,d as V}from"./isSymbol-B98uY8n-.js";/* empty css              */import{A as i}from"./Alert-CXLFhIlH.js";import{v as A}from"./AuthAction-Bnnw91pu.js";import{g as M}from"./gaurd-Ci8kRv3r.js";const n="otp_timer",G=()=>{const x=v(s=>s.ui.theme),p=N(),g=y(),c=k(),{email:o}=g.state||{},[d,m]=l.useState(!1);l.useEffect(()=>{o||c("/register")},[o,c]);const[u,h]=l.useState(!0),[r,f]=l.useState(()=>{const s=localStorage.getItem(n),t=Math.floor(Date.now()/1e3);return s&&s>t?s-t:(localStorage.setItem(n,t+300),300)});l.useEffect(()=>{if(r>0){const s=setInterval(()=>{f(t=>t<=1?(clearInterval(s),h(!1),localStorage.removeItem(n),0):t-1)},1e3);return()=>clearInterval(s)}},[r]);const b=async(s,{setSubmitting:t})=>{t(!1),m(!0);const a=await p(A(s));a.success?i({status:!0,text:a.data.message}):i({status:!1,text:a==null?void 0:a.error.message}),m(!1)},j=async()=>{const s=await V({email:o});s.status==200?(f(300),h(!0),i({status:!0,text:s.data.message})):i({status:!1,text:s==null?void 0:s.data.message}),console.log(s)};return e.jsx("div",{children:e.jsxs("div",{style:{minHeight:"100vh",zIndex:1},className:"d-flex align-items-center position-relative w-100 p-2",children:[e.jsx("div",{className:"col-12 col-sm-5 position-absolute top-0 h-100 d-none d-lg-block p-2",children:e.jsx("div",{className:"bg-secondary h-100 rounded-5 d-block m-auto"})}),e.jsx("div",{className:"container position-relative z-1",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-7 d-none d-lg-flex ali justify-content-end",children:e.jsx("img",{src:M,alt:"",className:"w-75"})}),e.jsx("div",{className:"col-12 col-lg-5",children:e.jsxs("div",{className:"col-10 mx-auto",children:[e.jsx("img",{src:x=="dark"?D:F,width:"200",className:"mt-3",alt:"Usindh Logo"}),e.jsx(w,{initialValues:{email:o,token:""},validationSchema:R({token:T().required("Code required!")}),onSubmit:b,children:e.jsxs(S,{method:"POST",autoComplete:"off",children:[e.jsx("h3",{className:"fw-bold mt-4 mb-4",children:"Verify Email"}),e.jsxs("div",{className:"alert p-0",children:[e.jsx("p",{className:"small fw-bold",children:"An OTP code has been sent to your email."}),e.jsx("p",{className:"small",children:"Please check your email and follow the instructions. If you don't receive an email, please check your spam folder."})]}),e.jsxs("div",{className:"form-group my-2",children:[e.jsx("label",{className:"form-label",htmlFor:"token",children:"Enter 6 digit code"}),e.jsx("span",{className:"text-danger fw-bold",children:"*"}),e.jsx(E,{type:"text",className:"form-control form-control-sm border-0 border-bottom border-3 rounded-0",placeholder:"41****",name:"token",id:"token",onInput:s=>s.target.value=s.target.value.replace(/\D/g,"").slice(0,6)}),e.jsx("div",{className:"small text-danger",children:e.jsx(I,{name:"token"})})]}),e.jsxs("div",{className:"form-group mt-4",children:[e.jsx("button",{type:"submit",className:"btn btn-primary btn-sm bg-primary shadow shadow-sm rounded-pill p-3 px-5",disabled:d,children:d?"Verifying...":"Verify"}),e.jsxs("p",{className:"small mt-3",children:["Didn't get the code?",e.jsx("button",{className:"btn btn-link p-0 text-decoration-none",disabled:u,onClick:j,type:"button",children:u?`Resend in ${Math.floor(r/60)}:${String(r%60).padStart(2,"0")}`:"Resend"})]})]})]})})]})})]})})]})})};export{G as default};
