import{f as y,r as h,w as q,i as b,j as a}from"./index-BFSWvyhh.js";import{A as c}from"./Alert-CXLFhIlH.js";import{c as j}from"./ExperienceRequest-B01sxlBJ.js";import{c as N,f as m,a as r,d as w}from"./index.esm-DKed_wgO.js";import{E as D}from"./ExperienceForm-9q72oT3K.js";import"./isSymbol-B98uY8n-.js";import"./formik.esm-Bg87zhII.js";import"./FormControl-BQZGBokq.js";import"./CConditionalPortal-DaAJL4r3.js";import"./CFormLabel-CbVdSG0w.js";import"./CustomSelect-BtwL3Ue1.js";import"./index.esm-BvQuuiUP.js";const k=()=>{const p=y(t=>t.auth.authData),[l,s]=h.useState(!1),u=q(),_=b(),f={user_id:p.user.USER_ID,organization_name:"",job_description:"",start_date:"",end_date:"",is_job_continue:"",emp_type:"",salary:"",reason_for_leaving:"",contact_no:"",address:""},x=N({organization_name:r().required("Organization name required"),job_description:r().required("Job description required"),emp_type:r().required("Employment type required"),address:r().required("Address required"),start_date:m().required("Start date required"),end_date:m().min(w("start_date"),"end date can't be before start date")}),E=async(t,{setSubmitting:S,resetForm:A})=>{var i,o,d,n;S(!1),s(!0);const g={...t,start_date:t.start_date?new Date(t.start_date).toISOString().split("T")[0]:"",end_date:t.end_date?new Date(t.end_date).toISOString().split("T")[0]:""};try{const e=await j(g);_({type:"EXPERIENCE_COMPLETENESS_SUCCESS",payload:(i=e==null?void 0:e.data)==null?void 0:i.experience_completeness}),c({status:!0,text:((o=e==null?void 0:e.data)==null?void 0:o.message)||"Experience added successfully"}),u("/experience")}catch(e){c({status:!1,text:((n=(d=e.response)==null?void 0:d.data)==null?void 0:n.error_message)||"Some error occured"}),console.log(e)}s(!1)};return a.jsxs("div",{children:[a.jsxs("small",{className:"d-block fst-italic my-2",children:[a.jsx("span",{className:"fw-bold fst-italic",children:"Note:"})," Please add your recent experience first."]}),a.jsx(D,{initialValues:f,validationRules:x,handleSubmit:E,loading:l})]})};export{k as default};
