import{f as h,r as x,A as w,i as y,j as i}from"./index-CFt1f066.js";import{c as A}from"./QualificationRequest-CgT17vlK.js";import{A as u}from"./Alert-CXLFhIlH.js";import{Q as N}from"./QualificationForm-PvuTZVN8.js";import{c as j,a}from"./index.esm-g-bgoICI.js";import"./formik.esm-DGj08CUs.js";import"./isSymbol-ByaixRsz.js";import"./FormControl-CxxYqU6g.js";import"./CConditionalPortal-DZpQ5pqL.js";import"./CFormLabel-Dy6tVY1e.js";import"./CustomSelect-BVXkPcO2.js";import"./index.esm-DJsCAX2S.js";const Y=()=>{const c=h(e=>e.auth.authData),[_,o]=x.useState(!1),g=w(),m=y(),p=async(e,{setSubmitting:r,resetForm:k})=>{var s,d,n,l;r(!1),o(!0);const S={...e,result_date:e.result_date??e.result_date?new Date(e.result_date).toISOString().split("T")[0]:"",institute_id:e.organization_id||0,cgpa:e.cgpa==""?0:e.cgpa,out_of:e.out_of==""?0:e.out_of};try{const t=await A(S);console.log(t),m({type:"QUALIFICATION_COMPLETENESS_SUCCESS",payload:(s=t==null?void 0:t.data)==null?void 0:s.qualification_completeness}),u({status:!0,text:((d=t==null?void 0:t.data)==null?void 0:d.message)||"Qualification added successfully"}),g("/qualifications")}catch(t){u({status:!1,text:((l=(n=t.response)==null?void 0:n.data)==null?void 0:l.error_message)||"Some error occured"}),console.log(t)}o(!1)},f={user_id:c.user.USER_ID,degree_program:"",organization_id:"",discipline_id:"",obtained_marks:"",total_marks:"",major:"",passing_year:"",roll_no:"",is_result_declare:"Y",grading_as:"",result_date:"",grade:"",cgpa:"",out_of:""},q=j({degree_program:a().required("Level required"),discipline_id:a().required("Discipline required"),organization_id:a().required("Organization required"),roll_no:a().required("Roll No./Seat No. required"),is_result_declare:a().required(),obtained_marks:a().when("is_result_declare",(e,r)=>e=="Y"?r.required("Obtained Marks required"):r),total_marks:a().when("is_result_declare",(e,r)=>e=="Y"?r.required("Total Marks required"):r),grading_as:a().when("is_result_declare",(e,r)=>e=="Y"?r.required("Grading As required"):r),cgpa:a().when("grading_as",(e,r)=>e=="C"?r.required("CGPA required"):r),grade:a().when("grading_as",(e,r)=>e=="G"?r.required("Grade required"):r)});return i.jsxs("div",{children:[i.jsxs("small",{className:"d-block fst-italic my-2",children:[i.jsx("span",{className:"fw-bold fst-italic",children:"Note:"})," Please add your recent qualification first."]}),i.jsx(N,{initialValues:f,validationRules:q,handleSubmit:p,loading:_})]})};export{Y as default};
