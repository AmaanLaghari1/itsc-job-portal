import{A,j as s,q as x,r as l,f as p,C as f,L as N,K as I}from"./index-CFt1f066.js";import{C as T,a as j}from"./CCardBody-BznE4ENn.js";import{C}from"./DefaultLayout-CrjhFOCs.js";import{C as _}from"./CCardTitle-DQ-GefZx.js";import{C as P}from"./CCardText-D3UGvK2o.js";import{a as w}from"./index.esm-DJsCAX2S.js";import{c as D}from"./ApplicationRequest-BkvVguV1.js";import b from"./AdminDashboard-B1sP2ptG.js";import"./CConditionalPortal-DZpQ5pqL.js";import"./isSymbol-ByaixRsz.js";import"./AnnouncementRequest-CvoZS0z3.js";import"./DynamicDataTable-BLKAN8eu.js";import"./AlertConfirm-MJ-uUc8x.js";import"./Alert-CXLFhIlH.js";const S=({application:e})=>{var t,o,c,i,d,a;const r=A();return s.jsx("div",{className:"w-100 my-3",children:s.jsx(T,{className:"shadow shadow-sm",children:s.jsxs(j,{children:[s.jsx(C,{color:((t=e.application_status)==null?void 0:t.APPLICATION_STATUS_ID)===1||((o=e.application_status)==null?void 0:o.APPLICATION_STATUS_ID)===3||((c=e.application_status)==null?void 0:c.APPLICATION_STATUS_ID)===4?"success":"danger",className:"p-1 px-3 rounded-5 my-2 shadow shadow-lg",children:(i=e.application_status)==null?void 0:i.STATUS}),s.jsx(_,{className:"fw-bolder",children:e.announcement.ANNOUNCEMENT_TITLE??"NA"}),s.jsxs("div",{children:[s.jsx("span",{className:"fw-bold",children:"Position: "}),e.announcement.POSITION_NAME??"NA"]}),s.jsxs("div",{children:[s.jsx("span",{className:"fw-bold",children:"Department: "}),((d=e.announcement)==null?void 0:d.department.DEPT_NAME)??"NA"]}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[s.jsxs(P,{className:"my-auto text-muted small fw-bold",children:["Applied on: ",x(e.APPLY_DATE)]}),s.jsxs("div",{className:"d-flex flex-wrap gap-2 my-2",children:[((a=e.application_status)==null?void 0:a.APPLICATION_STATUS_ID)!==1?s.jsx("a",{href:"https://careers.usindh.edu.pk/backend/pdf/"+btoa(e.APPLICATION_ID),className:"btn btn-sm btn-outline-danger rounded-pill px-3",download:"itsc_application",children:"Download Challan"}):s.jsx("a",{href:"https://careers.usindh.edu.pk/backend/application-pdf/"+btoa(e.APPLICATION_ID),className:"btn btn-sm btn-outline-success rounded-pill px-3",download:"itsc_application",children:"Download Form"}),s.jsx(w,{className:"rounded-pill px-3",color:"secondary",size:"sm",onClick:()=>{r("/announcement-detail",{state:{announcement:e.announcement}})},children:"View Announcement"})]})]})]})})})},z=()=>{const[e,r]=l.useState(!1),[t,o]=l.useState([]),c=p(a=>a.auth.authData),i=p(a=>a.roles.selectedRole);async function d(){r(!0);try{const u=(await D(c.user.USER_ID)).data.data,h=await Promise.all(u.map(async n=>{if(n.application_status.STATUS==="UNPAID")try{if((await I.get("https://careers.usindh.edu.pk/backend/api/application/verify-challan/"+n.APPLICATION_ID)).data.status)return{...n,application_status:{...n.application_status,STATUS:"APPLIED",APPLICATION_STATUS_ID:1}}}catch(m){console.error("Error fetching payment status:",m)}return n}));o(h)}catch{}r(!1)}return l.useEffect(()=>{d()},[]),i==4?s.jsxs("div",{children:[s.jsx("div",{className:"border-bottom border-3 border-primary p-2",children:s.jsx("h3",{children:"My Applications"})}),s.jsx("div",{className:"d-flex flex-wrap",children:e?s.jsx(f,{className:"align-slef-start my-3",color:"primary"}):t.length>0?t.map(a=>s.jsx(S,{application:a},a.APPLICATION_ID)):s.jsx("div",{className:"d-flex justify-content-center w-100",children:s.jsxs("div",{className:"fst-italic my-5 py-5",children:["You have no application applied! ",s.jsx(N,{to:"/announcements",className:"text-decoration-none",children:"Apply Now"})]})})})]}):s.jsx(b,{})};export{z as default};
