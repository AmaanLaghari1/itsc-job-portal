import{e as u,f as d,g as f,h as y}from"./isSymbol-B98uY8n-.js";const E=o=>async a=>{var r,t,n,l,s;a({type:"AUTH_START"});try{const e=await d(o);if((r=e.data)!=null&&r.status){const i=e.data;let c={profile:e.data.profile_completeness??0,qualification:e.data.qualification_completeness??0,experience:e.data.experience_completeness??0};return i?(a({type:"AUTH_SUCCESS",payload:i}),a({type:"PROFILE_COMPLETENESS_SUCCESS",payload:c}),{success:!0,data:e.data}):(console.error("User data is missing in response"),a({type:"AUTH_FAILED"}),{success:!1,data:e.data})}else return console.error("Registration failed:",e.data),a({type:"AUTH_FAILED"}),{success:!1,data:((t=e.data)==null?void 0:t.message)||"Registration failed"}}catch(e){return console.error("Error in registration:",e),a({type:"AUTH_FAILED"}),{success:!1,error:((n=e.response)==null?void 0:n.data)||((s=(l=e.response)==null?void 0:l.data)==null?void 0:s.message)||"Sign up failed"}}},g=o=>async a=>{var r,t,n,l,s;a({type:"AUTH_START"});try{const e=await u(o);if((r=e==null?void 0:e.data)!=null&&r.status){const i=e.data;let c={profile:e.data.profile_completeness??0,qualification:e.data.qualification_completeness??0,experience:e.data.experience_completeness??0};if(i){a({type:"AUTH_SUCCESS",payload:i});const p=i.user_roles[0].ROLE_ID??null;return p!==null&&a({type:"SWITCH_ROLE",payload:p}),a({type:"GET_ALL_COMPLETENESS",payload:c}),{success:!0,data:e.data}}else return console.error("User data is missing in response"),a({type:"AUTH_FAILED"}),{success:!1,data:e.data}}else return console.error("Login failed:",e.data),a({type:"AUTH_FAILED"}),{success:!1,data:((t=e.data)==null?void 0:t.message)||"Login failed"}}catch(e){return console.error("Error in loggin in:",e),a({type:"AUTH_FAILED"}),{success:!1,error:((n=e.response)==null?void 0:n.data)||((s=(l=e.response)==null?void 0:l.data)==null?void 0:s.message)||"Login failed"}}},A=o=>async a=>{var r;try{const t=await y(o);a({type:"LOGOUT"})}catch(t){console.error("Logout error:",((r=t.response)==null?void 0:r.data)||t)}},T=o=>async a=>{var r,t,n,l;try{const s=await f(o),e=s.data;let i={profile:s.data.profile_completeness??0,qualification:s.data.qualification_completeness??0,experience:s.data.experience_completeness??0};return e?(a({type:"AUTH_SUCCESS",payload:e}),a({type:"GET_ALL_COMPLETENESS",payload:i}),{success:!0,data:s.data}):(a({type:"AUTH_FAILED"}),{success:!1,data:((r=s.data)==null?void 0:r.message)||"Verification failed"})}catch(s){return console.log(s),a({type:"AUTH_FAILED"}),{success:!1,error:((t=s.response)==null?void 0:t.data)||((l=(n=s.response)==null?void 0:n.data)==null?void 0:l.message)||"Verification failed"}}},m=o=>({type:"SWITCH_ROLE",payload:o});export{g as a,A as l,E as r,m as s,T as v};
