import{r as s,j as t}from"./index-CFt1f066.js";import{F as w,a as A}from"./formik.esm-DGj08CUs.js";import{c as N,a as n}from"./index.esm-g-bgoICI.js";import{F as c}from"./FormControl-CxxYqU6g.js";import{b as g,i as b}from"./ApplicationRequest-BkvVguV1.js";import{D as R}from"./DynamicDataTable-BLKAN8eu.js";import{a as j}from"./index.esm-DJsCAX2S.js";import"./isSymbol-ByaixRsz.js";import"./CConditionalPortal-DZpQ5pqL.js";import"./CFormLabel-Dy6tVY1e.js";const q=()=>{const[r,i]=s.useState(!1),[l,d]=s.useState([]),[a,m]=s.useState([]),p={from_date:"",to_date:""},u=N().shape({from_date:n().required("Required!"),to_date:n().required("Required!")}),h=async e=>{i(!0);try{const o=await g(e);d(o.data)}catch(o){console.error(o)}i(!1)},x=async()=>{if(a.length!==0){console.log("Importing selected rows:",a);try{const e=new FormData;e.append("paid_applications_data",JSON.stringify(a));const o=await b(e);console.log(o)}catch(e){console.error("Error importing selected rows:",e)}}},f=[{name:"Challan No.",selector:e=>e.CHALLAN_NO},{name:"Position Applied",selector:e=>e.PROGRAM,width:"300px",wrap:!0},{name:"Applicant Name",selector:e=>e.NAME,width:"200px"},{name:"Father's Name",selector:e=>e.FNAME,width:"200px"},{name:"CNIC No.",selector:e=>e.CNIC_NO,width:"150px"},{name:"Paid Amount",selector:e=>"Rs. "+e.PAID_AMOUNT,width:"120px"},{name:"Due Amount",selector:e=>"Rs. "+e.DUE_AMOUNT,width:"120px"},{name:"Paid Date",selector:e=>e.PAID_DATE}];return t.jsxs("div",{children:[t.jsx(w,{initialValues:p,validationSchema:u,onSubmit:h,children:({setFieldValue:e})=>t.jsxs(A,{children:[t.jsx("div",{className:"row",children:t.jsx("div",{className:"col-12 col-sm-6",children:t.jsxs("div",{className:"d-flex gap-2 flex-wrap form-group my-2",children:[t.jsx(c,{control:"date",name:"from_date",label:"From",required:!0}),t.jsx(c,{control:"date",name:"to_date",label:"To",required:!0,maxDateDisabled:!0})]})})}),t.jsx("button",{disabled:r,type:"submit",className:"btn btn-primary mb-3",children:r?"Fetching...":"Fetch Report"})]})}),l.length>0&&t.jsx("div",{className:"d-flex gap-2 my-2",children:t.jsxs(j,{variant:"success",disabled:a.length===0,onClick:x,children:["Import Selected (",a.length,")"]})}),t.jsx(R,{title:"Paid Applications Report",columns:f,data:l,selectableRows:!0,onSelectedRowsChange:({selectedRows:e})=>m(e)})]})};export{q as default};
