import{j as s,r as i,n as E,u as B,w as Y}from"./index-BFSWvyhh.js";import{F as k,a as Q,b as P}from"./formik.esm-Bg87zhII.js";import{F as A}from"./FormControl-BQZGBokq.js";import{a as H}from"./index.esm-BvQuuiUP.js";import{u as V}from"./ApplicationRequest-BlVA9grW.js";import{A as U}from"./Alert-CXLFhIlH.js";import{c as J}from"./index.esm-DKed_wgO.js";import{g as K}from"./QualificationRequest-CBa2qH3U.js";import{g as W}from"./ExperienceRequest-B01sxlBJ.js";import{j as z}from"./isSymbol-B98uY8n-.js";import{C as b}from"./CCardHeader-BjMuWU9g.js";import{C as T}from"./CCardTitle-D8MwU8ht.js";import{C as l,a as e}from"./CRow-zVXjQc30.js";import"./CConditionalPortal-DaAJL4r3.js";import"./CFormLabel-CbVdSG0w.js";const X=({initialValues:a,validationRules:n,handleSubmit:x})=>s.jsx("div",{children:s.jsx(k,{initialValues:a,validationSchema:n,onSubmit:x,children:({values:d,setFieldValue:o})=>s.jsxs(Q,{children:[s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-sm-6",children:s.jsx("div",{className:"form-group my-2",children:s.jsx(A,{control:"input",name:"channel",label:"Payment Channel",required:!0})})}),s.jsx("div",{className:"col-sm-6",children:s.jsx("div",{className:"form-group my-2",children:s.jsx(A,{control:"input",name:"paid_amount",label:"Paid Amount",required:!0})})})]}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-sm-6",children:s.jsxs("div",{className:"form-group my-2",children:[s.jsx("label",{className:"form-label",htmlFor:"active",children:"Active"}),s.jsxs(P,{as:"select",id:"active",name:"active",value:d.active,className:"form-control",onChange:N=>{o("active",N.target.value)},children:[s.jsx("option",{value:1,children:"Yes"}),s.jsx("option",{value:0,children:"No"})]})]})}),s.jsx("div",{className:"col-sm-6",children:s.jsxs("div",{className:"form-group my-2",children:[s.jsx("label",{className:"form-label",htmlFor:"application_status",children:"Application Status"}),s.jsxs(P,{as:"select",id:"application_status",name:"application_status",value:d.application_status,className:"form-control",onChange:N=>{o("application_status",N.target.value)},children:[s.jsx("option",{value:1,children:"Applied"}),s.jsx("option",{value:2,children:"Unpaid"}),s.jsx("option",{value:3,children:"Shortlisted"}),s.jsx("option",{value:4,children:"Selected"}),s.jsx("option",{value:5,children:"Rejected"})]})]})})]}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-sm-3",children:s.jsx("div",{className:"form-group my-2",children:s.jsx(A,{control:"date",name:"apply_date",label:"Apply Date",required:!0})})}),s.jsx("div",{className:"col-sm-6",children:s.jsx("div",{className:"form-group my-2",children:s.jsx(A,{control:"input",name:"remarks",label:"Remarks",required:!1})})})]}),s.jsx(H,{variant:"primary",type:"submit",className:"btn btn-primary fs-5 mx-auto d-block rounded-0 px-3 my-3",children:"Save"})]})})}),Z=({prevData:a,announcement:n})=>{var R;const[x,d]=i.useState(!1),[o,N]=i.useState({}),[j,I]=i.useState([]),[p,m]=i.useState([]),_=async(r,c=null,S=null)=>{try{const h=await z.get("https://careers.usindh.edu.pk/backend/api/user/get-user-detail/"+r+"/"+c+"/"+S);N(F=>{var w,C,D,g,O,y,M,v,L;return{...F,country:((D=(C=(w=h.data)==null?void 0:w.data)==null?void 0:C.country[0])==null?void 0:D.COUNTRY_NAME)||"",province:((y=(O=(g=h.data)==null?void 0:g.data)==null?void 0:O.province[0])==null?void 0:y.PROVINCE_NAME)||"",district:((L=(v=(M=h.data)==null?void 0:M.data)==null?void 0:v.district[0])==null?void 0:L.DISTRICT_NAME)||""}})}catch(h){console.error("Error fetching user details:",h);return}};async function f(){d(!0);const r=await K(a.USER_ID);I(r.data.data),d(!1)}async function u(){d(!0);const r=await W(a.USER_ID);m(r.data.data),d(!1)}i.useEffect(()=>{_(a.COUNTRY_ID,a.PROVINCE_ID||null,a.DISTRICT_ID||null),f(),u()},[]);const t=(r,c)=>!r||!c?[]:r.filter(S=>c.some(h=>h.DEGREE_ID===S.degree.DEGREE_ID)),G=i.useMemo(()=>{var r;return t(j,(r=n[0])==null?void 0:r.qualification_requirements)},[j,(R=n[0])==null?void 0:R.qualification_requirements]);return s.jsxs("div",{children:[s.jsxs("div",{className:"card shadow shadow-sm my-3 w-100 p-0 my-2",children:[s.jsx(b,{className:"fw-bolder d-flex align-items-center",children:s.jsx(T,{className:"h5 my-2",children:"Basic Information"})}),s.jsxs("div",{className:"d-flex flex-column gap-2 p-3",children:[s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Name"}),s.jsx(e,{sm:4,className:"border-bottom border-1 fw-bold p-2 ",children:a.FIRST_NAME||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Surname"}),s.jsx(e,{sm:4,className:"border-bottom border-1  p-2 fw-bold",children:a.LAST_NAME||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Email"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:a.EMAIL||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"CNIC No."}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:a.CNIC_NO||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Father's Name"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:a.FNAME||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Mobile No."}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:a.MOBILE_NO||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"Date of Birth"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:E(a.DATE_OF_BIRTH)||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"Place of Birth"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:a.PLACE_OF_BIRTH||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Gender"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:a.GENDER=="M"?"MALE":a.GENDER=="F"?"FEMALE":""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"RELIGION"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:a.RELIGION||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"MARITAL STATUS"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:a.MARITAL_STATUS==1?"SINGLE":a.MARITAL_STATUS==2?"MARRIED":a.MARITAL_STATUS==3?"WIDOWED":"DIVORCED"}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"COUNTRY"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:o.country||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"DOMICILE PROVINCE"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:o.province||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"DOMICILE DISTRICT"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:o.district||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"PERMANENT ADDRESS"}),s.jsx(e,{sm:10,className:"border-bottom border-1 p-2 fw-bold",children:a.PERMANENT_ADDRESS||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"HOME ADDRESS"}),s.jsx(e,{sm:10,className:"border-bottom border-1 p-2 fw-bold",children:a.HOME_ADDRESS||""})]})]})]}),s.jsxs("div",{className:"card shadow shadow-sm my-3 w-100 p-0 my-2",children:[s.jsx(b,{className:"fw-bolder d-flex align-items-center",children:s.jsx(T,{className:"h5 my-2",children:"Qualifications"})}),G.map((r,c)=>s.jsxs("div",{children:[s.jsx(b,{className:"fw-bolder d-flex align-items-center",children:r.degree.DEGREE_TITLE||"Qualification "+(c+1)}),s.jsxs("div",{className:"d-flex flex-column gap-2 p-3",children:[s.jsxs(l,{className:"",children:[s.jsx(e,{sm:3,children:"Board/University Name"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.organization.INSTITUTE_NAME})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Discipline"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.discipline.DISCIPLINE_NAME})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Major Subject"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.MAJOR||"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Roll No."}),s.jsx(e,{sm:3,className:"fw-bold",children:r.ROLL_NO||"-"}),s.jsx(e,{sm:3,children:r.GRADING_AS=="G"?"Grade":"CGPA"}),s.jsx(e,{sm:3,className:"fw-bold",children:r.GRADE||r.CGPA||"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Obtained Marks"}),s.jsx(e,{sm:3,className:"fw-bold",children:r.OBTAINED_MARKS||"-"}),s.jsx(e,{sm:3,children:"Total Marks"}),s.jsx(e,{sm:3,className:"fw-bold",children:r.TOTAL_MARKS||"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Passing Year"}),s.jsx(e,{sm:3,className:"fw-bold",children:r.PASSING_YEAR||"-"}),s.jsx(e,{sm:3,children:"Result Declaration Date"}),s.jsx(e,{sm:3,className:"fw-bold",children:E(r.RESULT_DATE)||"-"})]})]})]},c))]}),p.length>0&&s.jsxs("div",{className:"card shadow shadow-sm my-3 w-100 p-0 my-2",children:[s.jsx(b,{className:"fw-bolder d-flex align-items-center",children:s.jsx(T,{className:"h5 my-2",children:"Experience"})}),p.map((r,c)=>s.jsx("div",{children:s.jsxs("div",{className:"card w-100 p-0",children:[s.jsx(b,{className:"fw-bolder d-flex",children:r.ORGANIZATION_NAME}),s.jsxs("div",{className:"d-flex flex-column gap-2 p-3 small",children:[s.jsxs(l,{className:"",children:[s.jsx(e,{sm:3,className:"",children:"Employment Type"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.EMP_TYPE})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Job Description"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.JOB_DESCRIPTION})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Salary"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.SALARY??"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Employer Contact No."}),s.jsx(e,{sm:9,className:"fw-bold",children:r.CONTACT_NO})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Start Date"}),s.jsx(e,{sm:3,className:"fw-bold",children:E(r.START_DATE)||"-"}),s.jsx(e,{sm:3,className:"",children:"End Date"}),s.jsx(e,{sm:3,className:"fw-bold",children:r.IS_JOB_CONTINUE==="Y"?"Currently Working":E(r.END_DATE)||"-"})]}),r.IS_JOB_CONTINUE!=="Y"&&s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Reason for leaving"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.REASON_FOR_LEAVING||"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Address"}),s.jsx(e,{sm:9,className:"fw-bold",children:r.ADDRESS||"-"})]})]})]},r.EXPERIANCE_ID)},c))]})]})},hs=()=>{const[a,n]=i.useState(!1),x=B(),d=Y(),{prevData:o,announcement:N}=x.state||{};i.useEffect(function(){o||d("/admin/applications")},[]);const j={announcement_id:o.ANNOUNCEMENT_ID??"",apply_date:o.APPLY_DATE??"",paid_date:o.PAID_DATE??"",paid_amount:o.PAID_AMOUNT??"",active:o.ACTIVE??0,application_status:o.APPLICATION_STATUS??1,remarks:o.REMARKS??""},I=J({}),p=async(m,{setSubmitting:_})=>{var f,u;n(!0),_(!1),m.apply_date=new Date(m.apply_date).toISOString().split("T")[0],m.paid_date=m.paid_date?new Date(m.paid_date).toISOString().split("T")[0]:null;try{const t=await V(m,o.APPLICATION_ID);U({status:!0,text:((f=t.data)==null?void 0:f.message)||"Application updated successfully"}),d("/admin/applications")}catch(t){console.log(t),U({status:!1,text:((u=t==null?void 0:t.data)==null?void 0:u.message)||"Application update failed"})}n(!1)};return s.jsxs("div",{children:[s.jsx(Z,{prevData:o,announcement:N}),s.jsx(X,{initialValues:j,validationRules:I,handleSubmit:p,loading:a})]})};export{hs as default};
