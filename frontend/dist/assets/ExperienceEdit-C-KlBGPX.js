import{f as g,r as q,w as y,u as C,i as h,j as u}from"./index-DrpCck3H.js";import{A as m}from"./Alert-CXLFhIlH.js";import{u as b}from"./ExperienceRequest-B01sxlBJ.js";import{c as j,f as S,a as r,d as L}from"./index.esm-Cv9wGfPn.js";import{E as P}from"./ExperienceForm-A0qpkz0A.js";import"./isSymbol-B98uY8n-.js";import"./formik.esm-DftA7rzV.js";import"./FormControl-C80XsXFS.js";import"./CConditionalPortal-C416BAvS.js";import"./CFormLabel-C5-wr04h.js";import"./CustomSelect-DZveazcM.js";import"./index.esm-D60Tj9fk.js";const k=()=>{const l=g(a=>a.auth.authData),[f,s]=q.useState(!1),o=y(),A=C(),{prevExp:t,return_url:i,announcement:N}=A.state||{},E=h(),I={user_id:l.user.USER_ID||t.USER_ID,organization_name:(t==null?void 0:t.ORGANIZATION_NAME)||"",job_description:(t==null?void 0:t.JOB_DESCRIPTION)||"",start_date:(t==null?void 0:t.START_DATE)||"",end_date:(t==null?void 0:t.END_DATE)||"",is_job_continue:(t==null?void 0:t.IS_JOB_CONTINUE)||"",emp_type:(t==null?void 0:t.EMP_TYPE.toLowerCase())||"",salary:(t==null?void 0:t.SALARY)||"",reason_for_leaving:(t==null?void 0:t.REASON_FOR_LEAVING)||"",contact_no:(t==null?void 0:t.CONTACT_NO)||"",address:(t==null?void 0:t.ADDRESS)||""},O=j({organization_name:r().required("Organization name required"),job_description:r().required("Job description required"),emp_type:r().required("Employment type required"),address:r().required("Address required"),start_date:S().required("Start date required"),end_date:S().min(L("start_date"),"end date can't be before start date")}),D=async(a,{setSubmitting:R,resetForm:w})=>{var n,d,c,_;R(!1),s(!0);const T={...a,start_date:a.start_date?new Date(a.start_date).toISOString().split("T")[0]:"",end_date:a.end_date?new Date(a.end_date).toISOString().split("T")[0]:""};try{const e=await b(T,t.EXPERIANCE_ID);if(E({type:"EXPERIENCE_COMPLETENESS_SUCCESS",payload:(n=e==null?void 0:e.data)==null?void 0:n.experience_completeness}),m({status:!0,text:((d=e==null?void 0:e.data)==null?void 0:d.message)||"Experience updated successfully"}),i){o(i,{state:{announcement:N}});return}o("/experience")}catch(e){m({status:!1,text:((_=(c=e.response)==null?void 0:c.data)==null?void 0:_.error_message)||"Some error occured"})}s(!1)};return u.jsx("div",{children:u.jsx(P,{initialValues:I,validationRules:O,handleSubmit:D,loading:f})})};export{k as default};
