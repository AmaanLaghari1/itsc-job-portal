import{f as h,r as x,w,i as y,j as i}from"./index-DrpCck3H.js";import{c as N}from"./QualificationRequest-CBa2qH3U.js";import{A as u}from"./Alert-CXLFhIlH.js";import{Q as j}from"./QualificationForm-D3UsPYGs.js";import{c as k,a}from"./index.esm-Cv9wGfPn.js";import"./isSymbol-B98uY8n-.js";import"./formik.esm-DftA7rzV.js";import"./FormControl-C80XsXFS.js";import"./CConditionalPortal-C416BAvS.js";import"./CFormLabel-C5-wr04h.js";import"./CustomSelect-DZveazcM.js";import"./index.esm-D60Tj9fk.js";const Y=()=>{const c=h(e=>e.auth.authData),[_,o]=x.useState(!1),g=w(),m=y(),p=async(e,{setSubmitting:r,resetForm:A})=>{var s,d,n,l;r(!1),o(!0);const S={...e,result_date:e.result_date??e.result_date?new Date(e.result_date).toISOString().split("T")[0]:"",institute_id:e.organization_id||0,cgpa:e.cgpa==""?0:e.cgpa,out_of:e.out_of==""?0:e.out_of};try{const t=await N(S);console.log(t),m({type:"QUALIFICATION_COMPLETENESS_SUCCESS",payload:(s=t==null?void 0:t.data)==null?void 0:s.qualification_completeness}),u({status:!0,text:((d=t==null?void 0:t.data)==null?void 0:d.message)||"Qualification added successfully"}),g("/qualifications")}catch(t){u({status:!1,text:((l=(n=t.response)==null?void 0:n.data)==null?void 0:l.error_message)||"Some error occured"}),console.log(t)}o(!1)},f={user_id:c.user.USER_ID,degree_program:"",organization_id:"",discipline_id:"",obtained_marks:"",total_marks:"",major:"",passing_year:"",roll_no:"",is_result_declare:"Y",grading_as:"",result_date:"",grade:"",cgpa:"",out_of:""},q=k({degree_program:a().required("Level required"),discipline_id:a().required("Discipline required"),organization_id:a().required("Organization required"),roll_no:a().required("Roll No./Seat No. required"),is_result_declare:a().required(),obtained_marks:a().when("is_result_declare",(e,r)=>e=="Y"?r.required("Obtained Marks required"):r),total_marks:a().when("is_result_declare",(e,r)=>e=="Y"?r.required("Total Marks required"):r),grading_as:a().when("is_result_declare",(e,r)=>e=="Y"?r.required("Grading As required"):r),cgpa:a().when("grading_as",(e,r)=>e=="C"?r.required("CGPA required"):r),grade:a().when("grading_as",(e,r)=>e=="G"?r.required("Grade required"):r)});return i.jsxs("div",{children:[i.jsxs("small",{className:"d-block fst-italic my-2",children:[i.jsx("span",{className:"fw-bold fst-italic",children:"Note:"})," Please add your recent qualification first."]}),i.jsx(j,{initialValues:f,validationRules:q,handleSubmit:p,loading:_})]})};export{Y as default};
