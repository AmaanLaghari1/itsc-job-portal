import{r as c,w as E,f as b,j as t,L as A,n as l}from"./index-DrpCck3H.js";import{a as D,d as h}from"./AnnouncementRequest-oTMmNYuw.js";import{D as T}from"./DynamicDataTable-CHQKT7te.js";import{A as w}from"./AlertConfirm-MJ-uUc8x.js";import{A as m}from"./Alert-CXLFhIlH.js";import"./isSymbol-B98uY8n-.js";const O=()=>{const[s,r]=c.useState([]),d=E(),n=b(e=>e.roles.selectedRole);async function u(){const e=await D();r(e.data.data)}c.useEffect(()=>{u()},[]);const N=[{name:"ID",selector:e=>e.ANNOUNCEMENT_ID,sortable:!0,width:"80px"},{name:"Title",selector:e=>e.ANNOUNCEMENT_TITLE,sortable:!0,style:{minWidth:"200px",maxWidth:"300px"}},{name:"Position Name",selector:e=>e.POSITION_NAME,sortable:!0,wrap:!0,style:{minWidth:"150px"}},{name:"Department",selector:e=>e.department.DEPT_NAME,sortable:!0,style:{minWidth:"150px"}},{name:"Start Date",selector:e=>l(e.START_DATE),sortable:!0,width:"130px"},{name:"End Date",selector:e=>l(e.END_DATE),sortable:!0,width:"130px"},{name:"Actions",cell:e=>t.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-1",children:[t.jsx("button",{className:"btn btn-outline-success btn-sm",onClick:()=>{d("/admin/announcement/edit",{state:{prevData:e}})},children:"Edit"}),t.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:async()=>{var o,i;if(await w({title:"Delete item?",text:"This action cannot be undone."}))try{const a=await h(e.ANNOUNCEMENT_ID);m({status:!0,text:((o=a.data)==null?void 0:o.message)||"Announcement deleted successfully"}),r(x=>x.filter(f=>f.ANNOUNCEMENT_ID!==e.ANNOUNCEMENT_ID))}catch(a){m({status:!1,text:((i=a.data)==null?void 0:i.message)||"Error deleting announcement"})}},children:"Delete"})]}),ignoreRowClick:!0,width:"120px"}],p=n==1||n==2?s:s.filter(e=>e.ACCESS_ID==n);return t.jsxs("div",{className:"admin-dashboard",children:[t.jsx("div",{className:"d-flex flex-wrap align-items-center justify-content-between mb-2",children:t.jsx(A,{to:"/admin/announcement/add",className:"btn btn-primary btn-sm",children:"Add New +"})}),t.jsx(T,{title:"Announcements",columns:N,data:p})]})};export{O as default};
