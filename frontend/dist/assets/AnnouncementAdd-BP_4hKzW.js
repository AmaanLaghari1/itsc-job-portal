import{r as p,f as _,j as n}from"./index-DrpCck3H.js";import{c as o,b as s,a as t,e as q}from"./index.esm-Cv9wGfPn.js";import{c as f}from"./AnnouncementRequest-oTMmNYuw.js";import{A as g}from"./Alert-CXLFhIlH.js";import{A}from"./AnnouncementForm-WiWxMFgi.js";import"./isSymbol-B98uY8n-.js";import"./formik.esm-DftA7rzV.js";import"./FormControl-C80XsXFS.js";import"./CConditionalPortal-C416BAvS.js";import"./CFormLabel-C5-wr04h.js";import"./CustomSelect-DZveazcM.js";import"./index.esm-D60Tj9fk.js";const L=()=>{const[d,i]=p.useState(!1),c=_(e=>e.roles.selectedRole),m={announcement_title:"",position_name:"",dept_id:"",description:"",start_date:"",end_date:"",application_fee:"",age_from:18,age_to:"",qualifications:[],experience_years:"",ref_no:"",access_id:c},u=o().shape({announcement_title:t().required("Title required").max(255,"Title is too long"),position_name:t().required("Position Name required"),ref_no:t().required("Reference No required"),dept_id:t().required("Department required"),qualifications:q().min(1,"Select at least 1").of(o().required()).required(),start_date:t().required("Start Date required"),end_date:t().required("End Date required"),description:t().required("Description required").min(100,"Description too short"),age_from:s().required("Age Limit is required"),age_to:s().required("Age Limit is required")}),l=async e=>{var a;i(!0),e.start_date=new Date(e.start_date).toISOString().split("T")[0],e.end_date=new Date(e.end_date).toISOString().split("T")[0];try{const r=await f(e);g({status:!0,text:((a=r==null?void 0:r.data)==null?void 0:a.message)||"Announcement created successfully"})}catch(r){console.error("Error creating announcement:",r)}i(!1)};return n.jsx("div",{children:n.jsx(A,{initialValues:m,validationRules:u,handleSubmit:l,loading:d})})};export{L as default};
