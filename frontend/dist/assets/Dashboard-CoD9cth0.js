import{w as u,j as s,n as h,r as d,f as p,C as f,L as x}from"./index-BFSWvyhh.js";import{C as A,a as N}from"./CCardBody-Bt37Gv7-.js";import{C as j}from"./DefaultLayout-DOplUsjh.js";import{C}from"./CCardTitle-D8MwU8ht.js";import{C as I}from"./CCardText-8zjthmmB.js";import{a as T}from"./index.esm-BvQuuiUP.js";import{g as _}from"./ApplicationRequest-BlVA9grW.js";import{j as w}from"./isSymbol-B98uY8n-.js";import P from"./AdminDashboard-DtNZGX1v.js";import"./AuthAction-Bnnw91pu.js";import"./CConditionalPortal-DaAJL4r3.js";import"./AnnouncementRequest-BATYW7Oe.js";import"./DynamicDataTable-DMTjRBex.js";import"./AlertConfirm-MJ-uUc8x.js";import"./Alert-CXLFhIlH.js";const y=({application:e})=>{var t,o,r,c,l,i;const n=u();return s.jsx("div",{className:"w-100 my-3",children:s.jsx(A,{className:"shadow shadow-sm",children:s.jsxs(N,{children:[s.jsx(j,{color:((t=e.application_status)==null?void 0:t.APPLICATION_STATUS_ID)===1||((o=e.application_status)==null?void 0:o.APPLICATION_STATUS_ID)===3||((r=e.application_status)==null?void 0:r.APPLICATION_STATUS_ID)===4?"success":"danger",className:"p-1 px-3 rounded-5 my-2 shadow shadow-lg",children:(c=e.application_status)==null?void 0:c.STATUS}),s.jsx(C,{className:"fw-bolder",children:e.announcement.ANNOUNCEMENT_TITLE??"NA"}),s.jsxs("div",{children:[s.jsx("span",{className:"fw-bold",children:"Position: "}),e.announcement.POSITION_NAME??"NA"]}),s.jsxs("div",{children:[s.jsx("span",{className:"fw-bold",children:"Department: "}),((l=e.announcement)==null?void 0:l.department.DEPT_NAME)??"NA"]}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[s.jsxs(I,{className:"my-auto text-muted small fw-bold",children:["Applied on: ",h(e.APPLY_DATE)]}),s.jsxs("div",{className:"d-flex flex-wrap gap-2 my-2",children:[((i=e.application_status)==null?void 0:i.APPLICATION_STATUS_ID)!==1?s.jsx("a",{href:e.APPLICATION_URL,className:"btn btn-sm btn-outline-danger rounded-pill px-3",download:"itsc_application",children:"Download Challan"}):s.jsx("a",{href:"https://careers.usindh.edu.pk/backend/application-pdf/"+btoa(e.APPLICATION_ID),className:"btn btn-sm btn-outline-success rounded-pill px-3",download:"itsc_application",children:"Download Form"}),s.jsx(T,{className:"rounded-pill px-3",color:"secondary",size:"sm",onClick:()=>{n("/announcement-detail",{state:{announcement:e.announcement}})},children:"View Announcement"})]})]})]})})})},z=()=>{const[e,n]=d.useState(!1),[t,o]=d.useState([]),r=p(a=>a.auth.authData),c=p(a=>a.roles.selectedRole),l=async()=>{for(const a of t)if(console.log(a),a.application_status.STATUS==="UNPAID")try{const m=await w.get("https://careers.usindh.edu.pk/backend/api/application/verify-challan/"+a.APPLICATION_ID);console.log(m)}catch(m){console.error("Error fetching payment status:",m)}};async function i(){n(!0);try{const a=await _(r.user.USER_ID);o(a.data.data)}catch(a){console.log(a)}n(!1)}return d.useEffect(()=>{i()},[]),d.useEffect(()=>{l()},[]),c==4?s.jsxs("div",{children:[s.jsx("div",{className:"border-bottom border-3 border-primary p-2",children:s.jsx("h3",{children:"My Applications"})}),s.jsx("div",{className:"d-flex flex-wrap",children:e?s.jsx(f,{className:"align-slef-start my-3",color:"primary"}):t.length>0?t.map(a=>s.jsx(y,{application:a},a.APPLICATION_ID)):s.jsx("div",{className:"d-flex justify-content-center w-100",children:s.jsxs("div",{className:"fst-italic my-5 py-5",children:["You have no application applied! ",s.jsx(x,{to:"/announcements",className:"text-decoration-none",children:"Apply Now"})]})})})]}):s.jsx(P,{})};export{z as default};
