import{u as J,w as Q,f as V,r as t,j as s,C as E,n as p,L as z}from"./index-DrpCck3H.js";import{c as W}from"./ApplicationRequest-CxnVmjDH.js";import{A as L}from"./Alert-CXLFhIlH.js";import{a as h,c as _}from"./index.esm-D60Tj9fk.js";import{j as K}from"./isSymbol-B98uY8n-.js";import{g as X}from"./QualificationRequest-CBa2qH3U.js";import{g as Z}from"./ExperienceRequest-B01sxlBJ.js";import{C as $,a as q}from"./CCardBody-nX4X9_XO.js";import{C as x}from"./CCardHeader-CbS2HQDQ.js";import{C as A}from"./CCardTitle-CNLQud-q.js";import{c as I}from"./cil-pen-53d2I-C-.js";import{C as l,a as e}from"./CRow-BQyydn8r.js";const bs=()=>{const G=J(),{announcement:c,prevData:ss}=G.state||{},b=Q(),r=V(a=>a.auth.authData),[u,n]=t.useState(!1),[D,P]=t.useState([]),[j,U]=t.useState([]);t.useEffect(()=>{c||b("/announcements")},[]);async function B(){n(!0);const a=await X(r.user.USER_ID);P(a.data.data),n(!1)}t.useEffect(()=>{B()},[]);async function F(){n(!0);const a=await Z(r.user.USER_ID);U(a.data.data),n(!1)}t.useEffect(()=>{F()},[]);const[f,k]=t.useState({}),Y=async()=>{var m,N,i;const a={announcement_id:c.ANNOUNCEMENT_ID,user_id:r.user.USER_ID,profile_image:r.user.PROFILE_IMAGE,apply_date:new Date().toISOString().split("T")[0],first_name:r.user.FIRST_NAME,last_name:r.user.LAST_NAME,fname:r.user.FNAME,cnic_no:r.user.CNIC_NO,mobile_no:r.user.MOBILE_NO,email:r.user.EMAIL,gender:r.user.GENDER,marital_status:r.user.MARITAL_STATUS,religion:r.user.RELIGION,date_of_birth:new Date(r.user.DATE_OF_BIRTH),place_of_birth:r.user.PLACE_OF_BIRTH,home_address:r.user.HOME_ADDRESS,permanent_address:r.user.PERMANENT_ADDRESS,country_id:r.user.COUNTRY_ID,province_id:r.user.PROVINCE_ID,district_id:r.user.DISTRICT_ID},o=new FormData;o.append("payload",JSON.stringify(a)),o.append("application_qualification",JSON.stringify(w)),o.append("application_experience",JSON.stringify(j));try{const d=await W(o);d.status===200&&(console.log(d),b("/dashboard"),(m=d.data)!=null&&m.redirect_url?window.location.href=d.data.redirect_url:L({status:!0,text:"Application submitted successfully"}))}catch(d){console.error(d),L({status:!1,text:((i=(N=d.response)==null?void 0:N.data)==null?void 0:i.error_message)||"Error submitting application"})}};t.useEffect(()=>{(async(o,m=null,N=null)=>{n(!0);try{const i=await K.get("https://careers.usindh.edu.pk/backend/api/user/get-user-detail/"+o+"/"+m+"/"+N);k(d=>{var R,T,S,C,y,O,g,M,v;return{...d,country:((S=(T=(R=i.data)==null?void 0:R.data)==null?void 0:T.country[0])==null?void 0:S.COUNTRY_NAME)||"",province:((O=(y=(C=i.data)==null?void 0:C.data)==null?void 0:y.province[0])==null?void 0:O.PROVINCE_NAME)||"",district:((v=(M=(g=i.data)==null?void 0:g.data)==null?void 0:M.district[0])==null?void 0:v.DISTRICT_NAME)||""}})}catch(i){console.error("Error fetching user details:",i);return}n(!1)})(r.user.COUNTRY_ID,r.user.DOMICILE_PROVINCE||null,r.user.DISTRICT_ID||null)},[]);const H=(a,o)=>!a||!o?[]:a.filter(m=>o.some(N=>N.DEGREE_ID===m.degree.DEGREE_ID)),w=t.useMemo(()=>H(D,c==null?void 0:c.qualification_requirements),[D,c==null?void 0:c.qualification_requirements]);return s.jsx("div",{children:s.jsxs($,{className:"shadow shadow-lg my-5 border-0",children:[s.jsx("div",{className:"text-center",children:s.jsx("h1",{className:"display-4",children:"Review Application"})}),s.jsxs(q,{children:[s.jsxs("p",{children:["Please review your application details before submitting. Ensure all information is correct and complete to avoid any issues with your application. ",s.jsx("br",{}),"You will not be able to edit your application after submission.",s.jsxs("span",{className:"",children:[" If you have any questions, please contact us at ",s.jsx("a",{href:"mailto:usindh.edu.pk",className:"text-decoration-none",children:"usindh.edu.pk"}),"."]}),s.jsx("br",{}),s.jsx("br",{})]}),u?s.jsx(E,{className:"align-slef-start my-3",color:"primary"}):s.jsxs("div",{className:"card shadow shadow-sm my-3 w-100 p-0 my-2",children:[s.jsxs(x,{className:"fw-bolder d-flex align-items-center",children:[s.jsx(A,{className:"h5 my-2",children:"Basic Information"}),s.jsx("div",{className:"ms-auto",children:s.jsx(h,{variant:"success",color:"success",className:"btn btn-outline-success btn-sm mx-1",onClick:()=>b("/user-profile",{state:{return_url:"/confirm-application",announcement:c}}),children:s.jsx(_,{icon:I,size:"md"})})})]}),s.jsxs("div",{className:"d-flex flex-column gap-2 p-3",children:[s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Name"}),s.jsx(e,{sm:4,className:"border-bottom border-1 fw-bold p-2 ",children:r.user.FIRST_NAME||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Surname"}),s.jsx(e,{sm:4,className:"border-bottom border-1  p-2 fw-bold",children:r.user.LAST_NAME||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Email"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.EMAIL||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"CNIC No."}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.CNIC_NO||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Father's Name"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.FNAME||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Mobile No."}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.MOBILE_NO||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"Date of Birth"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:p(r.user.DATE_OF_BIRTH)||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"Place of Birth"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.PLACE_OF_BIRTH||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"Gender"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.GENDER=="M"?"MALE":r.user.GENDER=="F"?"FEMALE":""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"RELIGION"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.RELIGION||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"MARITAL STATUS"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:r.user.MARITAL_STATUS==1?"SINGLE":r.user.MARITAL_STATUS==2?"MARRIED":r.user.MARITAL_STATUS==3?"WIDOWED":"DIVORCED"}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"COUNTRY"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:f.country||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"DOMICILE PROVINCE"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:f.province||""}),s.jsx(e,{sm:2,className:"border-bottom border-1 p-2 ",children:"DOMICILE DISTRICT"}),s.jsx(e,{sm:4,className:"border-bottom border-1 p-2 fw-bold",children:f.district||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"PERMANENT ADDRESS"}),s.jsx(e,{sm:10,className:"border-bottom border-1 p-2 fw-bold",children:r.user.PERMANENT_ADDRESS||""})]}),s.jsxs(l,{className:"mx-2",children:[s.jsx(e,{sm:2,className:"border-bottom border-1 p-2",children:"HOME ADDRESS"}),s.jsx(e,{sm:10,className:"border-bottom border-1 p-2 fw-bold",children:r.user.HOME_ADDRESS||""})]})]})]}),s.jsxs("div",{className:"card shadow shadow-sm my-3 w-100 p-0 my-2",children:[s.jsx(x,{className:"fw-bolder d-flex align-items-center",children:s.jsx(A,{className:"h5 my-2",children:"Qualifications"})}),u?s.jsx(E,{className:"align-slef-start my-3",color:"primary"}):w.map((a,o)=>s.jsxs("div",{children:[s.jsxs(x,{className:"fw-bolder d-flex align-items-center",children:[a.degree.DEGREE_TITLE||"Qualification "+(o+1),s.jsx("div",{className:"ms-auto",children:s.jsx(h,{variant:"success",color:"success",className:"btn btn-outline-success btn-sm mx-1",onClick:()=>b("/qualification-edit",{state:{prevQual:a,return_url:"/confirm-application",announcement:c}}),children:s.jsx(_,{icon:I,size:"md"})})})]}),s.jsxs("div",{className:"d-flex flex-column gap-2 p-3",children:[s.jsxs(l,{className:"",children:[s.jsx(e,{sm:3,children:"Board/University Name"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.organization.INSTITUTE_NAME})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Discipline"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.discipline.DISCIPLINE_NAME})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Major Subject"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.MAJOR||"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Roll No."}),s.jsx(e,{sm:3,className:"fw-bold",children:a.ROLL_NO||"-"}),s.jsx(e,{sm:3,children:a.GRADING_AS=="G"?"Grade":"CGPA"}),s.jsx(e,{sm:3,className:"fw-bold",children:a.GRADE||a.CGPA||"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Obtained Marks"}),s.jsx(e,{sm:3,className:"fw-bold",children:a.OBTAINED_MARKS||"-"}),s.jsx(e,{sm:3,children:"Total Marks"}),s.jsx(e,{sm:3,className:"fw-bold",children:a.TOTAL_MARKS||"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,children:"Passing Year"}),s.jsx(e,{sm:3,className:"fw-bold",children:a.PASSING_YEAR||"-"}),s.jsx(e,{sm:3,children:"Result Declaration Date"}),s.jsx(e,{sm:3,className:"fw-bold",children:p(a.RESULT_DATE)||"-"})]})]})]},o))]}),j.length>0&&s.jsxs("div",{className:"card shadow shadow-sm my-3 w-100 p-0 my-2",children:[s.jsx(x,{className:"fw-bolder d-flex align-items-center",children:s.jsx(A,{className:"h5 my-2",children:"Experience"})}),u?s.jsx(E,{className:"align-slef-start my-3",color:"primary"}):j.map((a,o)=>s.jsx("div",{children:s.jsxs("div",{className:"card w-100 p-0",children:[s.jsxs(x,{className:"fw-bolder d-flex",children:[a.ORGANIZATION_NAME,s.jsx("div",{className:"ms-auto",children:s.jsx(h,{variant:"success",color:"success",className:"btn btn-outline-success btn-sm mx-1",onClick:()=>{b("/experience-edit",{state:{prevExp:a,return_url:"/confirm-application",announcement:c}})},children:s.jsx(_,{icon:I,size:"md"})})})]}),s.jsxs("div",{className:"d-flex flex-column gap-2 p-3 small",children:[s.jsxs(l,{className:"",children:[s.jsx(e,{sm:3,className:"",children:"Employment Type"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.EMP_TYPE})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Job Description"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.JOB_DESCRIPTION})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Salary"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.SALARY??"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Employer Contact No."}),s.jsx(e,{sm:9,className:"fw-bold",children:a.CONTACT_NO})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Start Date"}),s.jsx(e,{sm:3,className:"fw-bold",children:p(a.START_DATE)||"-"}),s.jsx(e,{sm:3,className:"",children:"End Date"}),s.jsx(e,{sm:3,className:"fw-bold",children:a.IS_JOB_CONTINUE==="Y"?"Currently Working":p(a.END_DATE)||"-"})]}),a.IS_JOB_CONTINUE!=="Y"&&s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Reason for leaving"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.REASON_FOR_LEAVING||"-"})]}),s.jsxs(l,{className:"border-top",children:[s.jsx(e,{sm:3,className:"",children:"Address"}),s.jsx(e,{sm:9,className:"fw-bold",children:a.ADDRESS||"-"})]})]})]},a.EXPERIANCE_ID)},o))]}),s.jsx("div",{className:"rounded-0",children:s.jsxs("p",{className:"fw-bold",children:[s.jsx("strong",{children:"Note:"})," Once you clicked on apply button, it will be considered final."]})})]}),s.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-2 my-2",children:[s.jsx(h,{color:"primary",className:"rounded-2 p-2 fs-5 shadow shadow-sm px-3 mt-3",onClick:()=>{Y()},children:"Apply Now"}),s.jsx(z,{to:"/announcements",children:s.jsx(h,{color:"danger",className:"rounded-2 p-2 fs-5 shadow shadow-sm px-3 mt-3",children:"Cancel"})})]})]})})};export{bs as default};
